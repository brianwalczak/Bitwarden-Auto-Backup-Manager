var Li=Object.create;var Je=Object.defineProperty;var di=Object.getOwnPropertyDescriptor;var Fi=Object.getOwnPropertyNames;var Vi=Object.getPrototypeOf,_i=Object.prototype.hasOwnProperty;var zi=(r,e)=>{for(var t in e)Je(r,t,{get:e[t],enumerable:!0})},ui=(r,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Fi(e))!_i.call(r,n)&&n!==t&&Je(r,n,{get:()=>e[n],enumerable:!(i=di(e,n))||i.enumerable});return r};var pi=(r,e,t)=>(t=r!=null?Li(Vi(r)):{},ui(e||!r||!r.__esModule?Je(t,"default",{value:r,enumerable:!0}):t,r)),Bi=r=>ui(Je({},"__esModule",{value:!0}),r),w=(r,e,t,i)=>{for(var n=i>1?void 0:i?di(e,t):e,c=r.length-1,p;c>=0;c--)(p=r[c])&&(n=(i?p(e,t,n):p(n))||n);return i&&n&&Je(e,t,n),n};var Mr={};zi(Mr,{Cipher:()=>Ke,CipherData:()=>xe,CipherWithIdExport:()=>ct,EncString:()=>o,Folder:()=>ue,FolderData:()=>ot,FolderWithIdExport:()=>at,IdentityTokenResponse:()=>Yt,PreloginResponse:()=>Jt,SymmetricCryptoKey:()=>$,SyncResponse:()=>zt});module.exports=Bi(Mr);var D={None:0,Password:1};function mi(r){switch(r){case D.None:case D.Password:return r;default:return D.None}}var Hi=Object.freeze({Login:1,SecureNote:2,Card:3,Identity:4,SshKey:5}),l=Hi,Vr=Object.freeze(Object.fromEntries(Object.entries(l).map(([r,e])=>[e,r])));var d=class{constructor(e){this.response=e}getResponseProperty(e,t=null,i=!1){if(e==null||e==="")throw new Error("propertyName must not be null/empty.");if(t==null&&this.response!=null&&(t=this.response),t==null)return null;if(!i&&t[e]===void 0){let n=null;e.charAt(0)===e.charAt(0).toUpperCase()?n=e.charAt(0).toLowerCase():n=e.charAt(0).toUpperCase(),e.length>1&&(n+=e.slice(1)),e=n,t[e]===void 0&&(e=e.toLowerCase()),t[e]===void 0&&(e=e.toUpperCase())}return t[e]}};var C=class r extends d{constructor(t=null){super(t);this.delete=!1;this.restore=!1;t!=null&&(this.delete=this.getResponseProperty("Delete"),this.restore=this.getResponseProperty("Restore"))}static fromJSON(t){return Object.assign(new r,t)}static fromSdkCipherPermissions(t){if(!t)return;let i=new r;return i.delete=t.delete,i.restore=t.restore,i}toSdkCipherPermissions(){return this}};var ye=class{constructor(e){e!=null&&(this.id=e.id,this.url=e.url,this.fileName=e.fileName,this.key=e.key,this.size=e.size,this.sizeName=e.sizeName)}};var fe=class{constructor(e){e!=null&&(this.cardholderName=e.cardholderName,this.brand=e.brand,this.number=e.number,this.expMonth=e.expMonth,this.expYear=e.expYear,this.code=e.code)}};var Gi=Object.freeze({Text:0,Hidden:1,Boolean:2,Linked:3}),A=Gi;function gi(r){switch(r){case A.Text:case A.Hidden:case A.Boolean:case A.Linked:return r;default:return A.Text}}var Qe={Username:100,Password:101},ee={CardholderName:300,ExpMonth:301,ExpYear:302,Code:303,Brand:304,Number:305},P={Title:400,MiddleName:401,Address1:402,Address2:403,Address3:404,City:405,State:406,PostalCode:407,Country:408,Company:409,Email:410,Phone:411,Ssn:412,Username:413,PassportNumber:414,LicenseNumber:415,FirstName:416,LastName:417,FullName:418};function yi(r){return r==null?void 0:[...Object.values(Qe),...Object.values(ee),...Object.values(P)].includes(r)?r:void 0}var q={Generic:0};function fi(r){return q.Generic}var he=class{constructor(e){this.type=A.Text;e!=null&&(this.type=e.type,this.name=e.name,this.value=e.value,this.linkedId=e.linkedId)}};var we=class{constructor(e){e!=null&&(this.title=e.title,this.firstName=e.firstName,this.middleName=e.middleName,this.lastName=e.lastName,this.address1=e.address1,this.address2=e.address2,this.address3=e.address3,this.city=e.city,this.state=e.state,this.postalCode=e.postalCode,this.country=e.country,this.company=e.company,this.email=e.email,this.phone=e.phone,this.ssn=e.ssn,this.username=e.username,this.passportNumber=e.passportNumber,this.licenseNumber=e.licenseNumber)}};var be=class{constructor(e){e!=null&&(this.credentialId=e.credentialId,this.keyType=e.keyType,this.keyAlgorithm=e.keyAlgorithm,this.keyCurve=e.keyCurve,this.keyValue=e.keyValue,this.rpId=e.rpId,this.userHandle=e.userHandle,this.userName=e.userName,this.counter=e.counter,this.rpName=e.rpName,this.userDisplayName=e.userDisplayName,this.discoverable=e.discoverable,this.creationDate=e.creationDate)}};var ve=class{constructor(e){e!=null&&(this.uri=e.uri,this.uriChecksum=e.uriChecksum,this.match=e.match)}};var Se=class{constructor(e){e!=null&&(this.username=e.username,this.password=e.password,this.passwordRevisionDate=e.passwordRevisionDate,this.totp=e.totp,this.autofillOnPageLoad=e.autofillOnPageLoad,e.uris&&(this.uris=e.uris.map(t=>new ve(t))),e.fido2Credentials&&(this.fido2Credentials=e.fido2Credentials?.map(t=>new be(t))))}};var ke=class{constructor(e){e!=null&&(this.password=e.password,this.lastUsedDate=e.lastUsedDate)}};var De=class{constructor(e){this.type=q.Generic;e!=null&&(this.type=e.type)}};var Pe=class{constructor(e){e!=null&&(this.privateKey=e.privateKey,this.publicKey=e.publicKey,this.keyFingerprint=e.keyFingerprint)}};var xe=class r{constructor(e,t){this.id="";this.edit=!1;this.viewPassword=!0;this.organizationUseTotp=!1;this.favorite=!1;this.type=l.Login;this.name="";this.reprompt=D.None;if(e==null){this.creationDate=this.revisionDate=new Date().toISOString();return}switch(this.id=e.id,this.organizationId=e.organizationId,this.folderId=e.folderId,this.edit=e.edit,this.viewPassword=e.viewPassword,this.permissions=e.permissions,this.organizationUseTotp=e.organizationUseTotp,this.favorite=e.favorite,this.revisionDate=e.revisionDate,this.type=e.type,this.name=e.name,this.notes=e.notes,this.collectionIds=t??e.collectionIds,this.creationDate=e.creationDate,this.deletedDate=e.deletedDate,this.archivedDate=e.archivedDate,this.reprompt=e.reprompt,this.key=e.key,this.type){case l.Login:this.login=new Se(e.login);break;case l.SecureNote:this.secureNote=new De(e.secureNote);break;case l.Card:this.card=new fe(e.card);break;case l.Identity:this.identity=new we(e.identity);break;case l.SshKey:this.sshKey=new Pe(e.sshKey);break;default:break}e.fields!=null&&(this.fields=e.fields.map(i=>new he(i))),e.attachments!=null&&(this.attachments=e.attachments.map(i=>new ye(i))),e.passwordHistory!=null&&(this.passwordHistory=e.passwordHistory.map(i=>new ke(i)))}static fromJSON(e){let t=Object.assign(new r,e);return e.permissions!=null&&(t.permissions=C.fromJSON(e.permissions)),t}};function qt(r,e,t){if(r==null)throw new Error(`${e} is null or undefined.${t?` ${t}`:""}`)}var Zt={0:2,2:3,3:1,4:1,5:2,6:2,7:1};var $i=require("rxjs");var Yi=require("rxjs");var vi=pi(require("path")),je=require("buffer/"),et=require("rxjs"),tt=require("tldts"),bi=typeof self>"u"?require("url"):null,g=class r{static{this.inited=!1}static{this.isNode=!1}static{this.isBrowser=!0}static{this.isMobileBrowser=!1}static{this.isAppleMobileBrowser=!1}static{this.global=null}static{this.regexpEmojiPresentation=/(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])/g}static{this.validHosts=["localhost"]}static{this.originalMinimumPasswordLength=8}static{this.minimumPasswordLength=12}static{this.maximumPasswordLength=128}static{this.DomainMatchBlacklist=new Map([["google.com",new Set(["script.google.com"])]])}static init(){r.inited||(r.inited=!0,r.isNode=typeof process<"u"&&process.release!=null&&process.release.name==="node",r.isBrowser=typeof window<"u",r.isMobileBrowser=r.isBrowser&&this.isMobile(window),r.isAppleMobileBrowser=r.isBrowser&&this.isAppleMobile(window),r.isNode?r.global=global:r.isBrowser?r.global=window:r.global=self)}static fromB64ToArray(e){if(e==null)return null;if(r.isNode)return new Uint8Array(Buffer.from(e,"base64"));{let t=r.global.atob(e),i=new Uint8Array(t.length);for(let n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return i}}static fromUrlB64ToArray(e){return r.fromB64ToArray(r.fromUrlB64ToB64(e))}static fromHexToArray(e){if(r.isNode)return new Uint8Array(Buffer.from(e,"hex"));{let t=new Uint8Array(e.length/2);for(let i=0;i<e.length;i+=2)t[i/2]=parseInt(e.substr(i,2),16);return t}}static fromUtf8ToArray(e){if(r.isNode)return new Uint8Array(Buffer.from(e,"utf8"));{let t=unescape(encodeURIComponent(e)),i=new Uint8Array(t.length);for(let n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return i}}static fromByteStringToArray(e){if(e==null)return null;let t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}static fromBufferToB64(e){if(e==null)return null;let t=r.normalizeToUint8Array(e);if(t.length===0)return"";if(r.isNode)return Buffer.from(t).toString("base64");{let i="";for(let n=0;n<t.byteLength;n++)i+=String.fromCharCode(t[n]);return r.global.btoa(i)}}static normalizeToUint8Array(e){if(e instanceof Uint8Array)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);{let t=e;return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}}static fromBufferToUrlB64(e){return r.fromB64toUrlB64(r.fromBufferToB64(e))}static fromB64toUrlB64(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}static fromBufferToUtf8(e){return je.Buffer.from(e).toString("utf8")}static fromBufferToByteString(e){return String.fromCharCode.apply(null,new Uint8Array(e))}static fromBufferToHex(e){if(r.isNode)return Buffer.from(e).toString("hex");{let t=new Uint8Array(e);return Array.prototype.map.call(t,i=>("00"+i.toString(16)).slice(-2)).join("")}}static hexStringToArrayBuffer(e){if(e.length%2!==0)throw"HexString has to be an even length";let t=new ArrayBuffer(e.length/2),i=new Uint8Array(t);for(let n=0;n<i.length;n++){let c=e.substr(n*2,2),p=parseInt(c,16);i[n]=p}return t}static fromUrlB64ToB64(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("Illegal base64url string!")}return t}static fromUrlB64ToUtf8(e){return r.fromB64ToUtf8(r.fromUrlB64ToB64(e))}static fromUtf8ToB64(e){return r.isNode?Buffer.from(e,"utf8").toString("base64"):je.Buffer.from(e,"utf8").toString("base64")}static fromUtf8ToUrlB64(e){return r.fromBufferToUrlB64(r.fromUtf8ToArray(e))}static fromB64ToUtf8(e){return r.isNode?Buffer.from(e,"base64").toString("utf8"):je.Buffer.from(e,"base64").toString("utf8")}static newGuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}static{this.guidRegex=/^[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/}static isGuid(e){return RegExp(r.guidRegex,"i").test(e)}static getHostname(e){if(r.isNullOrWhitespace(e)||(e=e.trim(),e.startsWith("data:"))||e.startsWith("about:")||e.startsWith("file:")||e.indexOf("!")>0)return null;try{let t=(0,tt.getHostname)(e,{validHosts:this.validHosts});if(t!=null)return t}catch{return null}return null}static getHost(e){let t=r.getUrl(e);try{return t!=null&&t.host!==""?t.host:null}catch{return null}}static getDomain(e){if(r.isNullOrWhitespace(e)||(e=e.trim(),e.startsWith("data:"))||e.startsWith("about:"))return null;try{let t=(0,tt.parse)(e,{validHosts:this.validHosts,allowPrivateDomains:!0});if(t!=null&&t.hostname!=null)return t.hostname==="localhost"||t.isIp?t.hostname:t.domain!=null?t.domain:null}catch{return null}return null}static getQueryParams(e){let t=r.getUrl(e);if(t==null||t.search==null||t.search==="")return null;let i=new Map;return(t.search[0]==="?"?t.search.substr(1):t.search).split("&").forEach(c=>{let p=c.split("=");p.length<1||i.set(decodeURIComponent(p[0]).toLowerCase(),p[1]==null?"":decodeURIComponent(p[1]))}),i}static getSortFunction(e,t){return(i,n)=>i[t]==null&&n[t]!=null?-1:i[t]!=null&&n[t]==null?1:i[t]==null&&n[t]==null?0:e.collator?e.collator.compare(i[t],n[t]):i[t].localeCompare(n[t])}static isNullOrWhitespace(e){return e==null||typeof e!="string"||e.trim()===""}static isNullOrEmpty(e){return e==null||typeof e!="string"||e==""}static isPromise(e){return e!=null&&typeof e.then=="function"&&typeof e.catch=="function"}static nameOf(e){return e}static assign(e,t){return Object.assign(e,t)}static iterateEnum(e){return Object.keys(e).filter(t=>Number.isNaN(+t)).map(t=>e[t])}static getUrl(e){return this.isNullOrWhitespace(e)?null:(e=e.trim(),r.getUrlObject(e))}static camelToPascalCase(e){return e.charAt(0).toUpperCase()+e.slice(1)}static pickTextColorBasedOnBgColor(e,t=186,i=!1){let n=e.charAt(0)==="#"?e.substring(1,7):e,c=parseInt(n.substring(0,2),16),p=parseInt(n.substring(2,4),16),f=parseInt(n.substring(4,6),16),k=i?"black":"black !important",G=i?"white":"white !important";return c*.299+p*.587+f*.114>t?k:G}static stringToColor(e){let t=0;for(let n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);let i="#";for(let n=0;n<3;n++){let c=t>>n*8&255;i+=("00"+c.toString(16)).substr(-2)}return i}static getContainerService(){if(this.global.bitwardenContainerService==null)throw new Error("global bitwardenContainerService not initialized.");return this.global.bitwardenContainerService}static validateHexColor(e){return/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(e)}static mapToRecord(e){return e==null?null:e instanceof Map?Object.fromEntries(e):e}static recordToMap(e){if(e==null)return null;if(e instanceof Map)return e;let t=Object.entries(e);return t.length===0?new Map:isNaN(Number(t[0][0]))?new Map(t):new Map(t.map(i=>[Number(i[0]),i[1]]))}static merge(e,t){return Object.assign(e,t)}static encodeRFC3986URIComponent(e){return encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)}static normalizePath(e){return vi.normalize(decodeURIComponent(e)).replace(/^(\.\.(\/|\\|$))+/,"")}static invalidUrlPatterns(e){let t=["..","%2e","\\","%5c"],i=decodeURIComponent(e.toLocaleLowerCase());return!!(t.some(n=>i.includes(n))||i.includes("?")&&this.validateQueryParameters(i))}static validateQueryParameters(e){try{let t;if(e.includes("?"))t=e.split("?")[1];else return!1;return["/","%2f","#","%23"].some(n=>t.includes(n))}catch(t){throw new Error(`Error validating query parameters: ${t}`)}}static isMobile(e){let t=!1;return(i=>{(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(i)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(i.substr(0,4)))&&(t=!0)})(e.navigator.userAgent||e.navigator.vendor||e.opera),t||e.navigator.userAgent.match(/iPad/i)!=null}static delay(e){return new Promise(t=>setTimeout(t,e))}static asyncToObservable(e){return(0,et.of)(void 0).pipe((0,et.switchMap)(()=>e()))}static daysRemaining(e){let t=e.getTime()-Date.now();return Math.max(0,Math.floor(t/864e5))}static isAppleMobile(e){return e.navigator.userAgent.match(/iPhone/i)!=null||e.navigator.userAgent.match(/iPad/i)!=null}static getUrlObject(e){let t=e.indexOf("://")>-1;if(!t&&e.indexOf(".")>-1)e="http://"+e;else if(!t)return null;try{return bi!=null?new bi.URL(e):new URL(e)}catch{}return null}};g.init();var Qt="[error: cannot decrypt]",o=class r{constructor(e,t,i,n){t!=null?this.initFromData(e,t,i,n):this.initFromEncryptedString(e)}get ivBytes(){return this.iv==null?null:g.fromB64ToArray(this.iv)}get macBytes(){return this.mac==null?null:g.fromB64ToArray(this.mac)}get dataBytes(){return this.data==null?null:g.fromB64ToArray(this.data)}toSdk(){return this.encryptedString}toJSON(){return this.encryptedString}static fromJSON(e){return e==null?null:new r(e)}initFromData(e,t,i,n){i!=null?this.encryptedString=e+"."+i+"|"+t:this.encryptedString=e+"."+t,n!=null&&(this.encryptedString=this.encryptedString+"|"+n),this.encryptionType=e,this.data=t,this.iv=i,this.mac=n}initFromEncryptedString(e){if(this.encryptedString=e,!this.encryptedString)return;let{encType:t,encPieces:i}=r.parseEncryptedString(this.encryptedString);if(this.encryptionType=t,i.length===Zt[t])switch(t){case 2:this.iv=i[0],this.data=i[1],this.mac=i[2];break;case 0:this.iv=i[0],this.data=i[1];break;case 3:case 4:this.data=i[0];break;case 5:case 6:this.data=i[0],this.mac=i[1];break;default:return}}static parseEncryptedString(e){let t=e.split("."),i,n=null;if(t.length===2)try{i=parseInt(t[0],null),n=t[1].split("|")}catch{return{encType:NaN,encPieces:[]}}else n=e.split("|"),i=0;return{encType:i,encPieces:n}}static isSerializedEncString(e){if(e==null)return!1;let{encType:t,encPieces:i}=this.parseEncryptedString(e);return isNaN(t)||i.length===0?!1:Zt[t]===i.length}async decrypt(e,t=null,i){if(this.decryptedValue!=null)return this.decryptedValue;try{if(t==null&&(t=await this.getKeyForDecryption(e)),t==null)throw new Error("No key to decrypt EncString with orgId "+e);let n=g.getContainerService().getEncryptService();this.decryptedValue=await n.decryptString(this,t)}catch(n){console.error("[EncString Generic Decrypt] failed to decrypt encstring. Context: "+(i??"No context"),n),this.decryptedValue=Qt}return this.decryptedValue}async getKeyForDecryption(e){let t=g.getContainerService().getKeyService();return e!=null?await t.getOrgKey(e):await t.getUserKey()}};var Xo=Object.freeze({KdfChange:0});var jt=class extends Error{constructor(e){super(`Invalid UUID: ${e}`)}};function x(r){if(g.isGuid(r))return r;throw new jt(r)}function ei(r){return r}var h=class{buildDomainModel(e,t,i,n=[]){for(let c in i){if(!i.hasOwnProperty(c))continue;let p=t[i[c]||c];n.indexOf(c)>-1?e[c]=p||null:e[c]=p?new o(p):null}}buildDataModel(e,t,i,n=[]){for(let c in i){if(!i.hasOwnProperty(c))continue;let p=e[i[c]||c];n.indexOf(c)>-1?t[c]=p??null:t[c]=p!=null?p.encryptedString:null}}async decryptObj(e,t,i,n=null,c="No Domain Context"){for(let p of i)t[p]=await e[p]?.decrypt(null,n,`Property: ${p}; ObjectContext: ${c}`)??null;return t}};var y=r=>r!=null?new o(r):void 0,a=r=>r!=null?o.fromJSON(r):void 0;function it(r){if(r!=null)return{lastUsedDate:r.lastUsedDate?new Date(r.lastUsedDate).getTime():void 0,lastLaunched:r.lastLaunched?new Date(r.lastLaunched).getTime():void 0}}function rt(r){if(r!=null)return{lastUsedDate:r.lastUsedDate?new Date(r.lastUsedDate).toISOString():void 0,lastLaunched:r.lastLaunched?new Date(r.lastLaunched).toISOString():void 0}}var $=class r{constructor(e){if(e==null)throw new Error("Must provide key");if(e.byteLength===32)this.innerKey={type:0,encryptionKey:e},this.keyB64=this.toBase64();else if(e.byteLength===64)this.innerKey={type:2,encryptionKey:e.slice(0,32),authenticationKey:e.slice(32)},this.keyB64=this.toBase64();else if(e.byteLength>64)this.innerKey={type:7,encryptionKey:e},this.keyB64=this.toBase64();else throw new Error(`Unsupported encType/key length ${e.byteLength}`)}toJSON(){return{keyB64:this.keyB64}}inner(){return this.innerKey}toBase64(){return g.fromBufferToB64(this.toEncoded())}toEncoded(){if(this.innerKey.type===0)return this.innerKey.encryptionKey;if(this.innerKey.type===2){let e=new Uint8Array(64);return e.set(this.innerKey.encryptionKey,0),e.set(this.innerKey.authenticationKey,32),e}else{if(this.innerKey.type===7)return this.innerKey.encryptionKey;throw new Error("Unsupported encryption type.")}}static fromString(e){if(e==null)return null;let t=g.fromB64ToArray(e);return new r(t)}static fromJSON(e){return r.fromString(e?.keyB64)}};var te=class r{constructor(e){e&&(this.id=e.id,this.url=e.url,this.size=e.size,this.sizeName=e.sizeName)}get fileSize(){try{if(this.size!=null)return parseInt(this.size)}catch{}return 0}get hasDecryptionError(){return this._hasDecryptionError||this.fileName===Qt}set hasDecryptionError(e){this._hasDecryptionError=e}static fromJSON(e){let t=e.key==null?null:$.fromJSON(e.key),i;return e.encryptedKey!=null&&(typeof e.encryptedKey=="string"?i=o.fromJSON(e.encryptedKey):e.encryptedKey instanceof o&&(i=e.encryptedKey)),Object.assign(new r,e,{key:t,encryptedKey:i})}toSdkAttachmentView(){return{id:this.id,url:this.url,size:this.size,sizeName:this.sizeName,fileName:this.fileName,key:this.encryptedKey?.toSdk(),decryptedKey:this.key?this.key.toBase64():void 0}}static fromSdkAttachmentView(e,t=!1){if(!e)return;let i=new r;return i.id=e.id,i.url=e.url,i.size=e.size,i.sizeName=e.sizeName,i.fileName=e.fileName,i.key=e.decryptedKey?$.fromString(e.decryptedKey):void 0,i.encryptedKey=e.key?new o(e.key):void 0,i._hasDecryptionError=t,i}};var Wi=["/","-","."," "],Si="\\"+Wi.join("\\").replace(" ","s"),qi="(([1]{1}[0-2]{1})|(0?[1-9]{1}))",ki="2[0-1]{1}\\d{2}",Zi=new RegExp(`[${Si}]`,"g"),Xi=new RegExp(`[^\\d${Si}]`,"g"),Qi=new RegExp(`^${qi}$`),ji=new RegExp(`^${ki}$`);var As=60*1e3;function Di(r){let e=r==null||r==="",t=e?null:`${r}`;if(e||t&&/^[1-9]{1}\d{3}$/.test(t))return t;if(t=(t||"").replace(/[^\d]/g,"").replace(/^[0]+(?=.)/,""),t===""&&(t=null),t&&t.length!==4){let i=("00"+t).slice(-2);t=`${new Date().getFullYear()}`.slice(0,2)+i}return t}var ti=class{constructor(e,t){this.propertyKey=e;this._i18nKey=t?.i18nKey,this.sortPosition=t.sortPosition}get i18nKey(){return this._i18nKey??this.propertyKey}};function b(r,e){return(t,i)=>{t.linkedFieldOptions==null&&(t.linkedFieldOptions=new Map),t.linkedFieldOptions.set(r,new ti(i,e))}}var T=class{};var Y=class Y extends T{get maskedCode(){return this.code!=null?"\u2022".repeat(this.code.length):void 0}get maskedNumber(){return this.number!=null?"\u2022".repeat(this.number.length):void 0}get brand(){return this._brand}set brand(e){this._brand=e,this._subTitle=void 0}get number(){return this._number}set number(e){this._number=e,this._subTitle=void 0}get subTitle(){if(this._subTitle==null&&(this._subTitle=this.brand,this.number!=null&&this.number.length>=4)){this._subTitle!=null&&this._subTitle!==""?this._subTitle+=", ":this._subTitle="";let e=this.number.length>=5&&this.number.match(new RegExp("^3[47]"))!=null?5:4;this._subTitle+="*"+this.number.substr(this.number.length-e)}return this._subTitle}get expiration(){let e=this.expYear?Di(this.expYear):void 0;if(!this.expMonth&&!e)return;let t=this.expMonth!=null?("0"+this.expMonth).slice(-2):"__";return t+=" / "+(e||"____"),t}static fromJSON(e){return Object.assign(new Y,e)}static getCardBrandByPatterns(e){if(e==null||typeof e!="string"||e.trim()==="")return;let t=new RegExp("^4");if(e.match(t)!=null)return"Visa";if(/^(5[1-5][0-9]{14}|2(22[1-9][0-9]{12}|2[3-9][0-9]{13}|[3-6][0-9]{14}|7[0-1][0-9]{13}|720[0-9]{12}))$/.test(e))return"Mastercard";if(t=new RegExp("^3[47]"),e.match(t)!=null)return"Amex";if(t=new RegExp("^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)"),e.match(t)!=null)return"Discover";if(t=new RegExp("^36"),e.match(t)!=null||(t=new RegExp("^30[0-5]"),e.match(t)!=null))return"Diners Club";if(t=new RegExp("^35(2[89]|[3-8][0-9])"),e.match(t)!=null)return"JCB";if(t=new RegExp("^(4026|417500|4508|4844|491(3|7))"),e.match(t)!=null)return"Visa"}static fromSdkCardView(e){let t=new Y;return t.cardholderName=e.cardholderName,t.brand=e.brand,t.number=e.number,t.expMonth=e.expMonth,t.expYear=e.expYear,t.code=e.code,t}toSdkCardView(){return this}};w([b(ee.CardholderName,{sortPosition:0})],Y.prototype,"cardholderName",2),w([b(ee.ExpMonth,{sortPosition:3,i18nKey:"expirationMonth"})],Y.prototype,"expMonth",2),w([b(ee.ExpYear,{sortPosition:4,i18nKey:"expirationYear"})],Y.prototype,"expYear",2),w([b(ee.Code,{sortPosition:5,i18nKey:"securityCode"})],Y.prototype,"code",2),w([b(ee.Brand,{sortPosition:2})],Y.prototype,"brand",1),w([b(ee.Number,{sortPosition:1})],Y.prototype,"number",1);var F=Y;var Pi=require("@bitwarden/sdk-internal");var Z=class r{constructor(e){this.type=A.Text;this.newField=!1;this.showValue=!1;this.showCount=!1;e&&(this.type=e.type,this.linkedId=e.linkedId)}get maskedValue(){return this.value!=null?"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022":void 0}static fromJSON(e){return Object.assign(new r,e)}static fromSdkFieldView(e){if(!e)return;let t=new r;return t.name=e.name,t.value=e.value,t.type=e.type,t.linkedId=e.linkedId,t}toSdkFieldView(){return{name:this.name??void 0,value:this.value??void 0,type:this.type??Pi.FieldType.Text,linkedId:this.linkedId??void 0}}};var S=class S extends T{constructor(){super()}get firstName(){return this._firstName}set firstName(e){this._firstName=e,this._subTitle=void 0}get lastName(){return this._lastName}set lastName(e){this._lastName=e,this._subTitle=void 0}get subTitle(){return this._subTitle==null&&(this.firstName!=null||this.lastName!=null)&&(this._subTitle="",this.firstName!=null&&(this._subTitle=this.firstName),this.lastName!=null&&(this._subTitle!==""&&(this._subTitle+=" "),this._subTitle+=this.lastName)),this._subTitle}get fullName(){if(this.title!=null||this.firstName!=null||this.middleName!=null||this.lastName!=null){let e="";return g.isNullOrWhitespace(this.title)||(e+=this.title+" "),g.isNullOrWhitespace(this.firstName)||(e+=this.firstName+" "),g.isNullOrWhitespace(this.middleName)||(e+=this.middleName+" "),g.isNullOrWhitespace(this.lastName)||(e+=this.lastName),e.trim()}}get fullAddress(){let e=this.address1??"";return g.isNullOrWhitespace(this.address2)||(g.isNullOrWhitespace(e)||(e+=", "),e+=this.address2),g.isNullOrWhitespace(this.address3)||(g.isNullOrWhitespace(e)||(e+=", "),e+=this.address3),e}get fullAddressPart2(){let e=!g.isNullOrWhitespace(this.city),t=!g.isNullOrWhitespace(this.state),i=!g.isNullOrWhitespace(this.postalCode);if(!e&&!t&&!i)return;let n=e?this.city:"-",c=this.state,p=i?this.postalCode:"-",f=n;return t&&(f+=", "+c),f+=", "+p,f}get fullAddressForCopy(){let e=this.fullAddress;return(this.city!=null||this.state!=null||this.postalCode!=null)&&(e+=`
`+this.fullAddressPart2),this.country!=null&&(e+=`
`+this.country),e}static fromJSON(e){return Object.assign(new S,e)}static fromSdkIdentityView(e){let t=new S;return t.title=e.title,t.firstName=e.firstName,t.middleName=e.middleName,t.lastName=e.lastName,t.address1=e.address1,t.address2=e.address2,t.address3=e.address3,t.city=e.city,t.state=e.state,t.postalCode=e.postalCode,t.country=e.country,t.company=e.company,t.email=e.email,t.phone=e.phone,t.ssn=e.ssn,t.username=e.username,t.passportNumber=e.passportNumber,t.licenseNumber=e.licenseNumber,t}toSdkIdentityView(){return this}};w([b(P.Title,{sortPosition:0})],S.prototype,"title",2),w([b(P.MiddleName,{sortPosition:2})],S.prototype,"middleName",2),w([b(P.Address1,{sortPosition:12})],S.prototype,"address1",2),w([b(P.Address2,{sortPosition:13})],S.prototype,"address2",2),w([b(P.Address3,{sortPosition:14})],S.prototype,"address3",2),w([b(P.City,{sortPosition:15,i18nKey:"cityTown"})],S.prototype,"city",2),w([b(P.State,{sortPosition:16,i18nKey:"stateProvince"})],S.prototype,"state",2),w([b(P.PostalCode,{sortPosition:17,i18nKey:"zipPostalCodeLabel"})],S.prototype,"postalCode",2),w([b(P.Country,{sortPosition:18})],S.prototype,"country",2),w([b(P.Company,{sortPosition:6})],S.prototype,"company",2),w([b(P.Email,{sortPosition:10})],S.prototype,"email",2),w([b(P.Phone,{sortPosition:11})],S.prototype,"phone",2),w([b(P.Ssn,{sortPosition:7})],S.prototype,"ssn",2),w([b(P.Username,{sortPosition:5})],S.prototype,"username",2),w([b(P.PassportNumber,{sortPosition:8})],S.prototype,"passportNumber",2),w([b(P.LicenseNumber,{sortPosition:9})],S.prototype,"licenseNumber",2),w([b(P.FirstName,{sortPosition:1})],S.prototype,"firstName",1),w([b(P.LastName,{sortPosition:4})],S.prototype,"lastName",1),w([b(P.FullName,{sortPosition:3})],S.prototype,"fullName",1);var V=S;var J=class r extends T{constructor(t){super();this.discoverable=!1;t!=null&&(this.credentialId=t.credentialId,this.keyType=t.keyType,this.keyAlgorithm=t.keyAlgorithm,this.keyCurve=t.keyCurve,this.keyValue=t.keyValue,this.rpId=t.rpId,this.userHandle=t.userHandle,this.userName=t.userName,this.counter=t.counter,this.rpName=t.rpName,this.userDisplayName=t.userDisplayName,this.discoverable=t.discoverable??!1,this.creationDate=t.creationDate)}get subTitle(){return this.userDisplayName}static fromJSON(t){let i=t.creationDate!=null?new Date(t.creationDate):null;return Object.assign(new r,t,{creationDate:i})}static fromSdkFido2CredentialView(t){if(t)return new r({credentialId:t.credentialId,keyType:t.keyType,keyAlgorithm:t.keyAlgorithm,keyCurve:t.keyCurve,keyValue:t.keyValue,rpId:t.rpId,userHandle:t.userHandle,userName:t.userName,counter:parseInt(t.counter),rpName:t.rpName,userDisplayName:t.userDisplayName,discoverable:t.discoverable?.toLowerCase()==="true",creationDate:new Date(t.creationDate)})}toSdkFido2CredentialFullView(){return{credentialId:this.credentialId,keyType:this.keyType,keyAlgorithm:this.keyAlgorithm,keyCurve:this.keyCurve,keyValue:this.keyValue,rpId:this.rpId,userHandle:this.userHandle,userName:this.userName,counter:this.counter.toString(),rpName:this.rpName,userDisplayName:this.userDisplayName,discoverable:this.discoverable?"true":"false",creationDate:this.creationDate?.toISOString()}}};var O={Domain:0,Host:1,StartsWith:2,Exact:3,RegularExpression:4,Never:5};function xi(r){if(r!=null)switch(r){case 0:case 1:case 2:case 3:case 4:case 5:return r;default:return}}var Ai=["https://","http://","ssh://","ftp://","sftp://","irc://","vnc://","rdp://","ms-rd:","chrome://","iosapp://","androidapp://"],nt=class{static canLaunch(e){if(g.isNullOrWhitespace(e))return!1;for(let t=0;t<Ai.length;t++)if(e.indexOf(Ai[t])===0)return!0;return!1}};var X=class r{constructor(e){e&&(this.match=e.match)}get uri(){return this._uri}set uri(e){this._uri=e,this._domain=void 0,this._canLaunch=void 0}get domain(){return this._domain==null&&this.uri!=null&&(this._domain=g.getDomain(this.uri),this._domain===""&&(this._domain=void 0)),this._domain}get hostname(){if(this.match!==O.RegularExpression)return this._hostname==null&&this.uri!=null&&(this._hostname=g.getHostname(this.uri),this._hostname===""&&(this._hostname=void 0)),this._hostname}get host(){if(this.match!==O.RegularExpression)return this._host==null&&this.uri!=null&&(this._host=g.getHost(this.uri),this._host===""&&(this._host=void 0)),this._host}get hostnameOrUri(){return this.hostname!=null?this.hostname:this.uri}get hostOrUri(){return this.host!=null?this.host:this.uri}get isWebsite(){return this.uri!=null&&(this.uri.indexOf("http://")===0||this.uri.indexOf("https://")===0||this.uri.indexOf("://")<0&&!g.isNullOrWhitespace(g.getDomain(this.uri)))}get canLaunch(){return this._canLaunch!=null?this._canLaunch:(this.uri!=null&&this.match!==O.RegularExpression?this._canLaunch=nt.canLaunch(this.launchUri):this._canLaunch=!1,this._canLaunch)}get launchUri(){if(this.uri!=null)return this.uri.indexOf("://")<0&&!g.isNullOrWhitespace(g.getDomain(this.uri))?"http://"+this.uri:this.uri}static fromJSON(e){return Object.assign(new r,e)}static fromSdkLoginUriView(e){if(e==null)return;let t=new r;return t.uri=e.uri,t.match=e.match,t}toSdkLoginUriView(){return{uri:this.uri??void 0,match:this.match??void 0,uriChecksum:void 0}}matchesUri(e,t,i,n){if(!this.uri||!e)return!1;let c=this.match??i;c??=O.Domain,n&&c===O.Never&&(c=O.Domain);let p=g.getDomain(e),f=t.add(p);switch(c){case O.Domain:return this.matchesDomain(e,f);case O.Host:{let k=g.getHost(e);return k!=null&&k===g.getHost(this.uri)}case O.Exact:return e===this.uri;case O.StartsWith:return e.startsWith(this.uri);case O.RegularExpression:try{return new RegExp(this.uri,"i").test(e)}catch{return!1}case O.Never:return!1;default:break}return!1}matchesDomain(e,t){if(e==null||this.domain==null||!t.has(this.domain))return!1;if(g.DomainMatchBlacklist.has(this.domain)){let i=g.getHost(e);return!g.DomainMatchBlacklist.get(this.domain).has(i)}return!0}};var pe=class pe extends T{constructor(t){super();this.uris=[];this.fido2Credentials=[];t&&(this.passwordRevisionDate=t.passwordRevisionDate,this.autofillOnPageLoad=t.autofillOnPageLoad)}get uri(){return this.hasUris?this.uris[0].uri:void 0}get maskedPassword(){return this.password!=null?"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022":void 0}get subTitle(){return g.isNullOrEmpty(this.username)&&this.fido2Credentials?.length>0?this.fido2Credentials[0].userName:this.username}get canLaunch(){return this.hasUris&&this.uris.some(t=>t.canLaunch)}get hasTotp(){return!g.isNullOrWhitespace(this.totp)}get launchUri(){if(this.hasUris){let t=this.uris.find(i=>i.canLaunch);if(t!=null)return t.launchUri}}get hasUris(){return this.uris!=null&&this.uris.length>0}get hasFido2Credentials(){return this.fido2Credentials!=null&&this.fido2Credentials.length>0}matchesUri(t,i,n,c){return this.uris==null?!1:this.uris.some(p=>p.matchesUri(t,i,n,c))}static fromJSON(t){if(t==null)return new pe;let i=Object.assign(new pe,t);return i.passwordRevisionDate=t.passwordRevisionDate==null?void 0:new Date(t.passwordRevisionDate),i.uris=t.uris?.map(n=>X.fromJSON(n))??[],i.fido2Credentials=t.fido2Credentials?.map(n=>J.fromJSON(n))??[],i}static fromSdkLoginView(t){let i=new pe;return i.username=t.username,i.password=t.password,i.passwordRevisionDate=t.passwordRevisionDate==null?void 0:new Date(t.passwordRevisionDate),i.totp=t.totp,i.autofillOnPageLoad=t.autofillOnPageLoad,i.uris=t.uris?.filter(n=>n.uri!=null&&n.uri!=="").map(n=>X.fromSdkLoginUriView(n))||[],i.fido2Credentials=[],i}toSdkLoginView(){return{username:this.username,password:this.password,passwordRevisionDate:this.passwordRevisionDate?.toISOString(),totp:this.totp,autofillOnPageLoad:this.autofillOnPageLoad??void 0,uris:this.uris?.map(t=>t.toSdkLoginUriView()),fido2Credentials:void 0}}};w([b(Qe.Username,{sortPosition:0})],pe.prototype,"username",2),w([b(Qe.Password,{sortPosition:1})],pe.prototype,"password",2);var I=pe;var Q=class r{constructor(e){this.password=null;this.lastUsedDate=null;e&&(this.lastUsedDate=e.lastUsedDate)}static fromJSON(e){let t=e.lastUsedDate==null?null:new Date(e.lastUsedDate);return Object.assign(new r,e,{lastUsedDate:t})}static fromSdkPasswordHistoryView(e){if(!e)return;let t=new r;return t.password=e.password,t.lastUsedDate=e.lastUsedDate==null?null:new Date(e.lastUsedDate),t}toSdkPasswordHistoryView(){return{password:this.password??"",lastUsedDate:this.lastUsedDate.toISOString()}}};var _=class r extends T{constructor(t){super();this.type=q.Generic;t&&(this.type=t.type)}get subTitle(){}static fromJSON(t){return Object.assign(new r,t)}static fromSdkSecureNoteView(t){let i=new r;return i.type=t.type,i}toSdkSecureNoteView(){return this}};var z=class r extends T{get maskedPrivateKey(){if(!this.privateKey||this.privateKey.length===0)return"";let e=this.privateKey.split(`
`).filter(t=>t.trim()!=="");return e=e.map((t,i)=>i===0||i===e.length-1?t:this.maskLine(t)),e.join(`
`)}maskLine(e){return"\u2022".repeat(32)}get subTitle(){return this.keyFingerprint}static fromJSON(e){return Object.assign(new r,e)}static fromSdkSshKeyView(e){let t=new r;return t.privateKey=e.privateKey,t.publicKey=e.publicKey,t.keyFingerprint=e.fingerprint,t}toSdkSshKeyView(){return{privateKey:this.privateKey,publicKey:this.publicKey,fingerprint:this.keyFingerprint}}};var Ae=class r{constructor(e){this.initializerKey=1;this.id="";this.name="";this.type=l.Login;this.favorite=!1;this.organizationUseTotp=!1;this.permissions=new C;this.edit=!1;this.viewPassword=!0;this.login=new I;this.identity=new V;this.card=new F;this.secureNote=new _;this.sshKey=new z;this.attachments=[];this.fields=[];this.passwordHistory=[];this.collectionIds=[];this.reprompt=D.None;this.decryptionFailure=!1;if(!e){this.creationDate=this.revisionDate=new Date;return}this.id=e.id,this.organizationId=e.organizationId,this.folderId=e.folderId,this.favorite=e.favorite,this.organizationUseTotp=e.organizationUseTotp,this.edit=e.edit,this.viewPassword=e.viewPassword,this.permissions=e.permissions,this.type=e.type,this.localData=e.localData,this.collectionIds=e.collectionIds,this.revisionDate=e.revisionDate,this.creationDate=e.creationDate,this.deletedDate=e.deletedDate,this.archivedDate=e.archivedDate,this.reprompt=e.reprompt??D.None,this.key=e.key}get item(){switch(this.type){case l.Login:return this.login;case l.SecureNote:return this.secureNote;case l.Card:return this.card;case l.Identity:return this.identity;case l.SshKey:return this.sshKey;default:break}}get subTitle(){return this.item?.subTitle}get canBeArchived(){return!this.isDeleted&&!this.isArchived}get hasPasswordHistory(){return this.passwordHistory&&this.passwordHistory.length>0}get hasLoginPassword(){return this.type===l.Login&&this.login?.password!=null&&this.login.password!==""}get hasAttachments(){return!!this.attachments&&this.attachments.length>0}get hasOldAttachments(){if(this.hasAttachments){for(let e=0;e<this.attachments.length;e++)if(this.attachments[e].key==null&&this.attachments[e].encryptedKey==null)return!0}return!1}get hasFields(){return this.fields&&this.fields.length>0}get passwordRevisionDisplayDate(){if(!(this.type!==l.Login||this.login==null)&&!(this.login.password==null||this.login.password===""))return this.login.passwordRevisionDate}get isDeleted(){return this.deletedDate!=null}get isArchived(){return this.archivedDate!=null}get linkedFieldOptions(){return this.item?.linkedFieldOptions}get isUnassigned(){return this.organizationId!=null&&(this.collectionIds==null||this.collectionIds.length===0)}get canAssignToCollections(){return this.organizationId==null?!0:this.edit&&this.viewPassword}get canLaunch(){return this.type===l.Login&&this.login.canLaunch}linkedFieldValue(e){let t=this.linkedFieldOptions?.get(e),i=this.item;if(!(t==null||i==null))return i[t.propertyKey]}toJSON(){return this}static fromJSON(e){if(e==null)return null;let t=new r;if(t.type=e.type??l.Login,t.id=e.id??"",t.organizationId=e.organizationId??void 0,t.folderId=e.folderId??void 0,t.collectionIds=e.collectionIds??[],t.name=e.name??"",t.notes=e.notes,t.edit=e.edit??!1,t.viewPassword=e.viewPassword??!0,t.favorite=e.favorite??!1,t.organizationUseTotp=e.organizationUseTotp??!1,t.localData=e.localData?e.localData:void 0,t.permissions=e.permissions?C.fromJSON(e.permissions):void 0,t.reprompt=e.reprompt??D.None,t.decryptionFailure=e.decryptionFailure??!1,e.creationDate&&(t.creationDate=new Date(e.creationDate)),e.revisionDate&&(t.revisionDate=new Date(e.revisionDate)),t.deletedDate=e.deletedDate==null?void 0:new Date(e.deletedDate),t.archivedDate=e.archivedDate==null?void 0:new Date(e.archivedDate),t.attachments=e.attachments?.map(i=>te.fromJSON(i))??[],t.fields=e.fields?.map(i=>Z.fromJSON(i))??[],t.passwordHistory=e.passwordHistory?.map(i=>Q.fromJSON(i))??[],e.key!=null){let i;typeof e.key=="string"?i=o.fromJSON(e.key):e.key instanceof o&&(i=e.key),t.key=i}switch(e.type){case l.Card:t.card=F.fromJSON(e.card);break;case l.Identity:t.identity=V.fromJSON(e.identity);break;case l.Login:t.login=I.fromJSON(e.login);break;case l.SecureNote:t.secureNote=_.fromJSON(e.secureNote);break;case l.SshKey:t.sshKey=z.fromJSON(e.sshKey);break;default:break}return t}static fromSdkCipherView(e){if(e==null)return;let t=e.attachments?.map(n=>te.fromSdkAttachmentView(n))??[];e.attachmentDecryptionFailures?.length&&e.attachmentDecryptionFailures.forEach(n=>{let c=te.fromSdkAttachmentView(n,!0);c&&t.push(c)});let i=new r;switch(i.id=e.id,i.organizationId=e.organizationId,i.folderId=e.folderId,i.name=e.name,i.notes=e.notes,i.type=e.type,i.favorite=e.favorite,i.organizationUseTotp=e.organizationUseTotp,i.permissions=e.permissions?C.fromSdkCipherPermissions(e.permissions):void 0,i.edit=e.edit,i.viewPassword=e.viewPassword,i.localData=it(e.localData),i.attachments=t,i.fields=e.fields?.map(n=>Z.fromSdkFieldView(n))??[],i.passwordHistory=e.passwordHistory?.map(n=>Q.fromSdkPasswordHistoryView(n))??[],i.collectionIds=e.collectionIds?.map(n=>n)??[],i.revisionDate=new Date(e.revisionDate),i.creationDate=new Date(e.creationDate),i.deletedDate=e.deletedDate==null?void 0:new Date(e.deletedDate),i.archivedDate=e.archivedDate==null?void 0:new Date(e.archivedDate),i.reprompt=e.reprompt??D.None,i.key=e.key?o.fromJSON(e.key):void 0,e.type){case l.Card:i.card=e.card?F.fromSdkCardView(e.card):new F;break;case l.Identity:i.identity=e.identity?V.fromSdkIdentityView(e.identity):new V;break;case l.Login:i.login=e.login?I.fromSdkLoginView(e.login):new I;break;case l.SecureNote:i.secureNote=e.secureNote?_.fromSdkSecureNoteView(e.secureNote):new _;break;case l.SshKey:i.sshKey=e.sshKey?z.fromSdkSshKeyView(e.sshKey):new z;break;default:break}return i}toSdkCreateCipherRequest(){return{organizationId:this.organizationId?x(this.organizationId):void 0,collectionIds:this.collectionIds?this.collectionIds.map(t=>x(t)):[],folderId:this.folderId?x(this.folderId):void 0,name:this.name??"",notes:this.notes,favorite:this.favorite??!1,reprompt:this.reprompt??D.None,fields:this.fields?.map(t=>t.toSdkFieldView()),type:this.getSdkCipherViewType()}}toSdkUpdateCipherRequest(){return{id:x(this.id),organizationId:this.organizationId?x(this.organizationId):void 0,folderId:this.folderId?x(this.folderId):void 0,name:this.name??"",notes:this.notes,favorite:this.favorite??!1,reprompt:this.reprompt??D.None,fields:this.fields?.map(t=>t.toSdkFieldView()),type:this.getSdkCipherViewType(),revisionDate:this.revisionDate?.toISOString(),archivedDate:this.archivedDate?.toISOString(),attachments:this.attachments?.map(t=>t.toSdkAttachmentView()),key:this.key?.toSdk()}}getSdkCipherViewType(){let e;switch(this.type){case l.Card:e={card:this.card?.toSdkCardView()};break;case l.Identity:e={identity:this.identity?.toSdkIdentityView()};break;case l.Login:e={login:this.login?.toSdkLoginView()};break;case l.SecureNote:e={secureNote:this.secureNote?.toSdkSecureNoteView()};break;case l.SshKey:e={sshKey:this.sshKey?.toSdkSshKeyView()};break;default:e={login:new I().toSdkLoginView()};break}return e}toSdkCipherView(){let e={id:this.id?x(this.id):void 0,organizationId:this.organizationId?x(this.organizationId):void 0,folderId:this.folderId?x(this.folderId):void 0,name:this.name??"",notes:this.notes,type:this.type??l.Login,favorite:this.favorite??!1,organizationUseTotp:this.organizationUseTotp??!1,permissions:this.permissions?.toSdkCipherPermissions(),edit:this.edit??!0,viewPassword:this.viewPassword??!0,localData:rt(this.localData),attachments:this.attachments?.map(t=>t.toSdkAttachmentView()),fields:this.fields?.map(t=>t.toSdkFieldView()),passwordHistory:this.passwordHistory?.map(t=>t.toSdkPasswordHistoryView()),collectionIds:this.collectionIds?.map(t=>x(t))??[],revisionDate:(this.revisionDate??new Date).toISOString(),creationDate:(this.creationDate??new Date).toISOString(),deletedDate:this.deletedDate?.toISOString(),archivedDate:this.archivedDate?.toISOString(),reprompt:this.reprompt??D.None,key:this.key?.toSdk(),login:void 0,card:void 0,identity:void 0,secureNote:void 0,sshKey:void 0};switch(this.type){case l.Card:e.card=this.card?.toSdkCardView();break;case l.Identity:e.identity=this.identity?.toSdkIdentityView();break;case l.Login:e.login=this.login?.toSdkLoginView();break;case l.SecureNote:e.secureNote=this.secureNote?.toSdkSecureNoteView();break;case l.SshKey:e.sshKey=this.sshKey?.toSdkSshKeyView();break;default:break}return e}};var Te=class r extends h{constructor(e){super(),e!=null&&(this.id=e.id,this.url=e.url,this.size=e.size,this.sizeName=e.sizeName,this.fileName=y(e.fileName),this.key=y(e.key))}async decrypt(e,t="No Cipher Context"){let i=await this.decryptObj(this,new te(this),["fileName"],e,"DomainType: Attachment; "+t);return this.key!=null&&(i.key=await this.decryptAttachmentKey(e),i.encryptedKey=this.key,i.key||(i.hasDecryptionError=!0)),i}async decryptAttachmentKey(e){try{return this.key==null?void 0:await g.getContainerService().getEncryptService().unwrapSymmetricKey(this.key,e)}catch(t){console.error("[Attachment] Error decrypting attachment",t);return}}toAttachmentData(){let e=new ye;return this.size!=null&&(e.size=this.size),this.buildDataModel(this,e,{id:null,url:null,sizeName:null,fileName:null,key:null},["id","url","sizeName"]),e}static fromJSON(e){if(e==null)return;let t=new r;return t.id=e.id,t.url=e.url,t.size=e.size,t.sizeName=e.sizeName,t.key=a(e.key),t.fileName=a(e.fileName),t}toSdkAttachment(){return{id:this.id,url:this.url,size:this.size,sizeName:this.sizeName,fileName:this.fileName?.toSdk(),key:this.key?.toSdk()}}static fromSdkAttachment(e){if(!e)return;let t=new r;return t.id=e.id,t.url=e.url,t.size=e.size,t.sizeName=e.sizeName,t.fileName=a(e.fileName),t.key=a(e.key),t}};var ie=class r extends h{constructor(e){super(),e!=null&&(this.cardholderName=y(e.cardholderName),this.brand=y(e.brand),this.number=y(e.number),this.expMonth=y(e.expMonth),this.expYear=y(e.expYear),this.code=y(e.code))}async decrypt(e,t="No Cipher Context"){return this.decryptObj(this,new F,["cardholderName","brand","number","expMonth","expYear","code"],e,"DomainType: Card; "+t)}toCardData(){let e=new fe;return this.buildDataModel(this,e,{cardholderName:null,brand:null,number:null,expMonth:null,expYear:null,code:null}),e}static fromJSON(e){if(e==null)return;let t=new r;return t.cardholderName=a(e.cardholderName),t.brand=a(e.brand),t.number=a(e.number),t.expMonth=a(e.expMonth),t.expYear=a(e.expYear),t.code=a(e.code),t}toSdkCard(){return{cardholderName:this.cardholderName?.toSdk(),brand:this.brand?.toSdk(),number:this.number?.toSdk(),expMonth:this.expMonth?.toSdk(),expYear:this.expYear?.toSdk(),code:this.code?.toSdk()}}static fromSdkCard(e){if(!e)return;let t=new r;return t.cardholderName=a(e.cardholderName),t.brand=a(e.brand),t.number=a(e.number),t.expMonth=a(e.expMonth),t.expYear=a(e.expYear),t.code=a(e.code),t}};var re=class r extends h{constructor(t){super();this.type=A.Text;t!=null&&(this.type=t.type,this.linkedId=t.linkedId??void 0,this.name=y(t.name),this.value=y(t.value))}decrypt(t){return this.decryptObj(this,new Z(this),["name","value"],t)}toFieldData(){let t=new he;return this.buildDataModel(this,t,{name:null,value:null,type:null,linkedId:null},["type","linkedId"]),t}static fromJSON(t){if(t==null)return;let i=new r;return i.type=t.type??A.Text,i.linkedId=t.linkedId??void 0,i.name=a(t.name),i.value=a(t.value),i}toSdkField(){return{name:this.name?.toSdk(),value:this.value?.toSdk(),type:gi(this.type),linkedId:yi(this.linkedId)}}static fromSdkField(t){if(t==null)return;let i=new r;return i.name=a(t.name),i.value=a(t.value),i.type=t.type,i.linkedId=t.linkedId,i}};var ne=class r extends h{constructor(e){super(),e!=null&&(this.title=y(e.title),this.firstName=y(e.firstName),this.middleName=y(e.middleName),this.lastName=y(e.lastName),this.address1=y(e.address1),this.address2=y(e.address2),this.address3=y(e.address3),this.city=y(e.city),this.state=y(e.state),this.postalCode=y(e.postalCode),this.country=y(e.country),this.company=y(e.company),this.email=y(e.email),this.phone=y(e.phone),this.ssn=y(e.ssn),this.username=y(e.username),this.passportNumber=y(e.passportNumber),this.licenseNumber=y(e.licenseNumber))}decrypt(e,t="No Cipher Context"){return this.decryptObj(this,new V,["title","firstName","middleName","lastName","address1","address2","address3","city","state","postalCode","country","company","email","phone","ssn","username","passportNumber","licenseNumber"],e,"DomainType: Identity; "+t)}toIdentityData(){let e=new we;return this.buildDataModel(this,e,{title:null,firstName:null,middleName:null,lastName:null,address1:null,address2:null,address3:null,city:null,state:null,postalCode:null,country:null,company:null,email:null,phone:null,ssn:null,username:null,passportNumber:null,licenseNumber:null}),e}static fromJSON(e){if(e==null)return;let t=new r;return t.title=a(e.title),t.firstName=a(e.firstName),t.middleName=a(e.middleName),t.lastName=a(e.lastName),t.address1=a(e.address1),t.address2=a(e.address2),t.address3=a(e.address3),t.city=a(e.city),t.state=a(e.state),t.postalCode=a(e.postalCode),t.country=a(e.country),t.company=a(e.company),t.email=a(e.email),t.phone=a(e.phone),t.ssn=a(e.ssn),t.username=a(e.username),t.passportNumber=a(e.passportNumber),t.licenseNumber=a(e.licenseNumber),t}toSdkIdentity(){return{title:this.title?.toSdk(),firstName:this.firstName?.toSdk(),middleName:this.middleName?.toSdk(),lastName:this.lastName?.toSdk(),address1:this.address1?.toSdk(),address2:this.address2?.toSdk(),address3:this.address3?.toSdk(),city:this.city?.toSdk(),state:this.state?.toSdk(),postalCode:this.postalCode?.toSdk(),country:this.country?.toSdk(),company:this.company?.toSdk(),email:this.email?.toSdk(),phone:this.phone?.toSdk(),ssn:this.ssn?.toSdk(),username:this.username?.toSdk(),passportNumber:this.passportNumber?.toSdk(),licenseNumber:this.licenseNumber?.toSdk()}}static fromSdkIdentity(e){if(e==null)return;let t=new r;return t.title=a(e.title),t.firstName=a(e.firstName),t.middleName=a(e.middleName),t.lastName=a(e.lastName),t.address1=a(e.address1),t.address2=a(e.address2),t.address3=a(e.address3),t.city=a(e.city),t.state=a(e.state),t.postalCode=a(e.postalCode),t.country=a(e.country),t.company=a(e.company),t.email=a(e.email),t.phone=a(e.phone),t.ssn=a(e.ssn),t.username=a(e.username),t.passportNumber=a(e.passportNumber),t.licenseNumber=a(e.licenseNumber),t}};var oe=class r extends h{constructor(e){if(super(),e==null){this.creationDate=new Date;return}this.credentialId=new o(e.credentialId),this.keyType=new o(e.keyType),this.keyAlgorithm=new o(e.keyAlgorithm),this.keyCurve=new o(e.keyCurve),this.keyValue=new o(e.keyValue),this.rpId=new o(e.rpId),this.counter=new o(e.counter),this.discoverable=new o(e.discoverable),this.userHandle=y(e.userHandle),this.userName=y(e.userName),this.rpName=y(e.rpName),this.userDisplayName=y(e.userDisplayName),this.creationDate=new Date(e.creationDate)}async decrypt(e){let t=await this.decryptObj(this,new J,["credentialId","keyType","keyAlgorithm","keyCurve","keyValue","rpId","userHandle","userName","rpName","userDisplayName"],e),{counter:i}=await this.decryptObj(this,{counter:""},["counter"],e);t.counter=parseInt(i);let{discoverable:n}=await this.decryptObj(this,{discoverable:""},["discoverable"],e);return t.discoverable=n==="true",t.creationDate=this.creationDate,t}toFido2CredentialData(){let e=new be;return e.creationDate=this.creationDate.toISOString(),this.buildDataModel(this,e,{credentialId:null,keyType:null,keyAlgorithm:null,keyCurve:null,keyValue:null,rpId:null,userHandle:null,userName:null,counter:null,rpName:null,userDisplayName:null,discoverable:null}),e}static fromJSON(e){if(e==null)return;let t=new r;return t.credentialId=o.fromJSON(e.credentialId),t.keyType=o.fromJSON(e.keyType),t.keyAlgorithm=o.fromJSON(e.keyAlgorithm),t.keyCurve=o.fromJSON(e.keyCurve),t.keyValue=o.fromJSON(e.keyValue),t.rpId=o.fromJSON(e.rpId),t.userHandle=a(e.userHandle),t.userName=a(e.userName),t.counter=o.fromJSON(e.counter),t.rpName=a(e.rpName),t.userDisplayName=a(e.userDisplayName),t.discoverable=o.fromJSON(e.discoverable),t.creationDate=new Date(e.creationDate),t}toSdkFido2Credential(){return{credentialId:this.credentialId?.toSdk(),keyType:this.keyType.toSdk(),keyAlgorithm:this.keyAlgorithm.toSdk(),keyCurve:this.keyCurve.toSdk(),keyValue:this.keyValue.toSdk(),rpId:this.rpId.toSdk(),userHandle:this.userHandle?.toSdk(),userName:this.userName?.toSdk(),counter:this.counter.toSdk(),rpName:this.rpName?.toSdk(),userDisplayName:this.userDisplayName?.toSdk(),discoverable:this.discoverable?.toSdk(),creationDate:this.creationDate.toISOString()}}static fromSdkFido2Credential(e){if(e==null)return;let t=new r;return t.credentialId=o.fromJSON(e.credentialId),t.keyType=o.fromJSON(e.keyType),t.keyAlgorithm=o.fromJSON(e.keyAlgorithm),t.keyCurve=o.fromJSON(e.keyCurve),t.keyValue=o.fromJSON(e.keyValue),t.rpId=o.fromJSON(e.rpId),t.counter=o.fromJSON(e.counter),t.userHandle=a(e.userHandle),t.userName=a(e.userName),t.rpName=a(e.rpName),t.userDisplayName=a(e.userDisplayName),t.discoverable=o.fromJSON(e.discoverable),t.creationDate=new Date(e.creationDate),t}};var se=class r extends h{constructor(e){super(),e!=null&&(this.uri=y(e.uri),this.uriChecksum=y(e.uriChecksum),this.match=e.match??void 0)}decrypt(e,t="No Cipher Context"){return this.decryptObj(this,new X(this),["uri"],e,t)}async validateChecksum(e,t){if(this.uriChecksum==null)return!1;let i=g.getContainerService().getEncryptService(),n=await i.hash(e,"sha256");return await i.decryptString(this.uriChecksum,t)===n}toLoginUriData(){let e=new ve;return this.buildDataModel(this,e,{uri:null,uriChecksum:null,match:null},["match"]),e}static fromJSON(e){if(e==null)return;let t=new r;return t.uri=a(e.uri),t.match=e.match??void 0,t.uriChecksum=a(e.uriChecksum),t}toSdkLoginUri(){return{uri:this.uri?.toSdk(),uriChecksum:this.uriChecksum?.toSdk(),match:xi(this.match)}}static fromSdkLoginUri(e){if(e==null)return;let t=new r;return t.uri=a(e.uri),t.uriChecksum=a(e.uriChecksum),t.match=e.match,t}};var ae=class r extends h{constructor(e){super(),e!=null&&(this.passwordRevisionDate=e.passwordRevisionDate!=null?new Date(e.passwordRevisionDate):void 0,this.autofillOnPageLoad=e.autofillOnPageLoad,this.username=y(e.username),this.password=y(e.password),this.totp=y(e.totp),e.uris&&(this.uris=e.uris.map(t=>new se(t))),e.fido2Credentials&&(this.fido2Credentials=e.fido2Credentials.map(t=>new oe(t))))}async decrypt(e,t,i="No Cipher Context"){let n=await this.decryptObj(this,new I(this),["username","password","totp"],t,`DomainType: Login; ${i}`);if(this.uris!=null){n.uris=[];for(let c=0;c<this.uris.length;c++){if(this.uris[c].uri==null)continue;let p=await this.uris[c].decrypt(t,i),f=p.uri;if(f==null)continue;(e||await this.uris[c].validateChecksum(f,t))&&n.uris.push(p)}}return this.fido2Credentials!=null&&(n.fido2Credentials=await Promise.all(this.fido2Credentials.map(c=>c.decrypt(t)))),n}toLoginData(){let e=new Se;return this.passwordRevisionDate!=null&&(e.passwordRevisionDate=this.passwordRevisionDate.toISOString()),this.autofillOnPageLoad!=null&&(e.autofillOnPageLoad=this.autofillOnPageLoad),this.buildDataModel(this,e,{username:null,password:null,totp:null}),this.uris!=null&&this.uris.length>0&&(e.uris=this.uris.map(t=>t.toLoginUriData())),this.fido2Credentials!=null&&this.fido2Credentials.length>0&&(e.fido2Credentials=this.fido2Credentials.map(t=>t.toFido2CredentialData())),e}static fromJSON(e){if(e==null)return;let t=new r;return t.passwordRevisionDate=e.passwordRevisionDate!=null?new Date(e.passwordRevisionDate):void 0,t.autofillOnPageLoad=e.autofillOnPageLoad,t.username=a(e.username),t.password=a(e.password),t.totp=a(e.totp),t.uris=e.uris?.map(i=>se.fromJSON(i)).filter(i=>i!=null),t.fido2Credentials=e.fido2Credentials?.map(i=>oe.fromJSON(i)).filter(i=>i!=null)??void 0,t}toSdkLogin(){return{uris:this.uris?.map(e=>e.toSdkLoginUri()),username:this.username?.toSdk(),password:this.password?.toSdk(),passwordRevisionDate:this.passwordRevisionDate?.toISOString(),totp:this.totp?.toSdk(),autofillOnPageLoad:this.autofillOnPageLoad??void 0,fido2Credentials:this.fido2Credentials?.map(e=>e.toSdkFido2Credential())}}static fromSdkLogin(e){if(!e)return;let t=new r;return t.passwordRevisionDate=e.passwordRevisionDate!=null?new Date(e.passwordRevisionDate):void 0,t.autofillOnPageLoad=e.autofillOnPageLoad,t.username=a(e.username),t.password=a(e.password),t.totp=a(e.totp),t.uris=e.uris?.filter(i=>i.uri!=null).map(i=>se.fromSdkLoginUri(i)).filter(i=>i!=null)??void 0,t.fido2Credentials=e.fido2Credentials?.map(i=>oe.fromSdkFido2Credential(i)).filter(i=>i!=null)??void 0,t}};var le=class r extends h{constructor(e){super(),e!=null&&(this.password=new o(e.password),this.lastUsedDate=new Date(e.lastUsedDate))}decrypt(e){return this.decryptObj(this,new Q(this),["password"],e,"DomainType: PasswordHistory")}toPasswordHistoryData(){let e=new ke;return e.lastUsedDate=this.lastUsedDate.toISOString(),this.buildDataModel(this,e,{password:null}),e}static fromJSON(e){if(e==null)return;let t=new r;return t.password=o.fromJSON(e.password),t.lastUsedDate=new Date(e.lastUsedDate),t}toSdkPasswordHistory(){return{password:this.password.toSdk(),lastUsedDate:this.lastUsedDate.toISOString()}}static fromSdkPasswordHistory(e){if(!e)return;let t=new r;return t.password=o.fromJSON(e.password),t.lastUsedDate=new Date(e.lastUsedDate),t}};var ce=class r extends h{constructor(t){super();this.type=q.Generic;t!=null&&(this.type=t.type)}async decrypt(){return new _(this)}toSecureNoteData(){let t=new De;return t.type=this.type,t}static fromJSON(t){if(t==null)return;let i=new r;return i.type=t.type,i}toSdkSecureNote(){return{type:fi(this.type)}}static fromSdkSecureNote(t){if(t==null)return;let i=new r;return i.type=t.type,i}};var de=class r extends h{constructor(e){super(),e!=null&&(this.privateKey=new o(e.privateKey),this.publicKey=new o(e.publicKey),this.keyFingerprint=new o(e.keyFingerprint))}decrypt(e,t="No Cipher Context"){return this.decryptObj(this,new z,["privateKey","publicKey","keyFingerprint"],e,"DomainType: SshKey; "+t)}toSshKeyData(){let e=new Pe;return this.buildDataModel(this,e,{privateKey:null,publicKey:null,keyFingerprint:null}),e}static fromJSON(e){if(e==null)return;let t=new r;return t.privateKey=o.fromJSON(e.privateKey),t.publicKey=o.fromJSON(e.publicKey),t.keyFingerprint=o.fromJSON(e.keyFingerprint),t}toSdkSshKey(){return{privateKey:this.privateKey.toSdk(),publicKey:this.publicKey.toSdk(),fingerprint:this.keyFingerprint.toSdk()}}static fromSdkSshKey(e){if(e==null)return;let t=new r;return t.privateKey=o.fromJSON(e.privateKey),t.publicKey=o.fromJSON(e.publicKey),t.keyFingerprint=o.fromJSON(e.fingerprint),t}};var Ke=class r extends h{constructor(t,i){super();this.initializerKey=0;this.id="";this.name=new o("");this.type=l.Login;this.favorite=!1;this.organizationUseTotp=!1;this.edit=!1;this.viewPassword=!0;this.collectionIds=[];this.reprompt=D.None;if(t==null){this.creationDate=this.revisionDate=new Date;return}switch(this.id=t.id,this.organizationId=t.organizationId,this.folderId=t.folderId,this.name=new o(t.name),this.notes=y(t.notes),this.type=t.type,this.favorite=t.favorite,this.organizationUseTotp=t.organizationUseTotp,this.edit=t.edit,this.viewPassword=t.viewPassword,this.permissions=t.permissions,this.revisionDate=new Date(t.revisionDate),this.localData=i,this.collectionIds=t.collectionIds??[],this.creationDate=new Date(t.creationDate),this.deletedDate=t.deletedDate!=null?new Date(t.deletedDate):void 0,this.archivedDate=t.archivedDate!=null?new Date(t.archivedDate):void 0,this.reprompt=t.reprompt,this.key=y(t.key),this.type){case l.Login:this.login=new ae(t.login);break;case l.SecureNote:this.secureNote=new ce(t.secureNote);break;case l.Card:this.card=new ie(t.card);break;case l.Identity:this.identity=new ne(t.identity);break;case l.SshKey:this.sshKey=new de(t.sshKey);break;default:break}t.attachments!=null&&(this.attachments=t.attachments.map(n=>new Te(n))),t.fields!=null&&(this.fields=t.fields.map(n=>new re(n))),t.passwordHistory!=null&&(this.passwordHistory=t.passwordHistory.map(n=>new le(n)))}async decrypt(t){qt(t,"userKeyOrOrgKey","Cipher decryption");let i=new Ae(this),n=!0,c=t;if(this.key!=null){let p=g.getContainerService().getEncryptService();try{c=await p.unwrapSymmetricKey(this.key,t),n=!1}catch{return i.name="[error: cannot decrypt]",i.decryptionFailure=!0,i}}switch(await this.decryptObj(this,i,["name","notes"],c),this.type){case l.Login:this.login!=null&&(i.login=await this.login.decrypt(n,c,`Cipher Id: ${this.id}`));break;case l.SecureNote:this.secureNote!=null&&(i.secureNote=await this.secureNote.decrypt());break;case l.Card:this.card!=null&&(i.card=await this.card.decrypt(c,`Cipher Id: ${this.id}`));break;case l.Identity:this.identity!=null&&(i.identity=await this.identity.decrypt(c,`Cipher Id: ${this.id}`));break;case l.SshKey:this.sshKey!=null&&(i.sshKey=await this.sshKey.decrypt(c,`Cipher Id: ${this.id}`));break;default:break}if(this.attachments!=null&&this.attachments.length>0){let p=[];for(let f of this.attachments){let k=await f.decrypt(c,`Cipher Id: ${this.id}`);p.push(k)}i.attachments=p}if(this.fields!=null&&this.fields.length>0){let p=[];for(let f of this.fields){let k=await f.decrypt(c);p.push(k)}i.fields=p}if(this.passwordHistory!=null&&this.passwordHistory.length>0){let p=[];for(let f of this.passwordHistory){let k=await f.decrypt(c);p.push(k)}i.passwordHistory=p}return i}toCipherData(){let t=new xe;switch(t.id=this.id,this.organizationId!=null&&(t.organizationId=this.organizationId),this.folderId!=null&&(t.folderId=this.folderId),t.edit=this.edit,t.viewPassword=this.viewPassword,t.organizationUseTotp=this.organizationUseTotp,t.favorite=this.favorite,t.revisionDate=this.revisionDate.toISOString(),t.type=this.type,t.collectionIds=this.collectionIds,t.creationDate=this.creationDate.toISOString(),t.deletedDate=this.deletedDate!=null?this.deletedDate.toISOString():void 0,t.reprompt=this.reprompt,this.key!=null&&this.key.encryptedString!=null&&(t.key=this.key.encryptedString),this.permissions!=null&&(t.permissions=this.permissions),t.archivedDate=this.archivedDate!=null?this.archivedDate.toISOString():void 0,this.buildDataModel(this,t,{name:null,notes:null}),t.type){case l.Login:this.login!=null&&(t.login=this.login.toLoginData());break;case l.SecureNote:this.secureNote!=null&&(t.secureNote=this.secureNote.toSecureNoteData());break;case l.Card:this.card!=null&&(t.card=this.card.toCardData());break;case l.Identity:this.identity!=null&&(t.identity=this.identity.toIdentityData());break;case l.SshKey:this.sshKey!=null&&(t.sshKey=this.sshKey.toSshKeyData());break;default:break}return this.fields!=null&&(t.fields=this.fields.map(i=>i.toFieldData())),this.attachments!=null&&(t.attachments=this.attachments.map(i=>i.toAttachmentData())),this.passwordHistory!=null&&(t.passwordHistory=this.passwordHistory.map(i=>i.toPasswordHistoryData())),t}static fromJSON(t){if(t==null)return;let i=new r;switch(i.id=t.id,i.organizationId=t.organizationId,i.folderId=t.folderId,i.type=t.type,i.favorite=t.favorite,i.organizationUseTotp=t.organizationUseTotp,i.edit=t.edit,i.viewPassword=t.viewPassword,t.permissions!=null&&(i.permissions=new C(t.permissions)),i.collectionIds=t.collectionIds,i.localData=t.localData,i.reprompt=t.reprompt,i.creationDate=new Date(t.creationDate),i.revisionDate=new Date(t.revisionDate),i.deletedDate=t.deletedDate!=null?new Date(t.deletedDate):void 0,i.archivedDate=t.archivedDate!=null?new Date(t.archivedDate):void 0,i.name=o.fromJSON(t.name),i.notes=a(t.notes),i.key=a(t.key),i.attachments=t.attachments?.map(n=>Te.fromJSON(n)).filter(n=>n!=null),i.fields=t.fields?.map(n=>re.fromJSON(n)).filter(n=>n!=null),i.passwordHistory=t.passwordHistory?.map(n=>le.fromJSON(n)).filter(n=>n!=null),t.type){case l.Card:t.card!=null&&(i.card=ie.fromJSON(t.card));break;case l.Identity:t.identity!=null&&(i.identity=ne.fromJSON(t.identity));break;case l.Login:t.login!=null&&(i.login=ae.fromJSON(t.login));break;case l.SecureNote:t.secureNote!=null&&(i.secureNote=ce.fromJSON(t.secureNote));break;case l.SshKey:t.sshKey!=null&&(i.sshKey=de.fromJSON(t.sshKey));break;default:break}return i}toSdkCipher(){let t={id:this.id?x(this.id):void 0,organizationId:this.organizationId?x(this.organizationId):void 0,folderId:this.folderId?x(this.folderId):void 0,collectionIds:this.collectionIds?this.collectionIds.map(x):[],key:this.key?.toSdk(),name:this.name.toSdk(),notes:this.notes?.toSdk(),type:this.type,favorite:this.favorite,organizationUseTotp:this.organizationUseTotp,edit:this.edit,permissions:this.permissions?{delete:this.permissions.delete,restore:this.permissions.restore}:void 0,viewPassword:this.viewPassword,localData:rt(this.localData),attachments:this.attachments?.map(i=>i.toSdkAttachment()),fields:this.fields?.map(i=>i.toSdkField()),passwordHistory:this.passwordHistory?.map(i=>i.toSdkPasswordHistory()),revisionDate:this.revisionDate.toISOString(),creationDate:this.creationDate.toISOString(),deletedDate:this.deletedDate?.toISOString(),archivedDate:this.archivedDate?.toISOString(),reprompt:mi(this.reprompt),login:void 0,identity:void 0,card:void 0,secureNote:void 0,sshKey:void 0,data:void 0};switch(this.type){case l.Login:this.login!=null&&(t.login=this.login.toSdkLogin());break;case l.SecureNote:this.secureNote!=null&&(t.secureNote=this.secureNote.toSdkSecureNote());break;case l.Card:this.card!=null&&(t.card=this.card.toSdkCard());break;case l.Identity:this.identity!=null&&(t.identity=this.identity.toSdkIdentity());break;case l.SshKey:this.sshKey!=null&&(t.sshKey=this.sshKey.toSdkSshKey());break;default:break}return t}static fromSdkCipher(t){if(t==null)return;let i=new r;return i.id=t.id?t.id:"",i.organizationId=t.organizationId?t.organizationId:void 0,i.folderId=t.folderId?t.folderId:void 0,i.collectionIds=t.collectionIds?t.collectionIds.map(ei):[],i.key=a(t.key),i.name=o.fromJSON(t.name),i.notes=a(t.notes),i.type=t.type,i.favorite=t.favorite,i.organizationUseTotp=t.organizationUseTotp,i.edit=t.edit,i.permissions=C.fromSdkCipherPermissions(t.permissions),i.viewPassword=t.viewPassword,i.localData=it(t.localData),i.attachments=t.attachments?.map(n=>Te.fromSdkAttachment(n)).filter(n=>n!=null),i.fields=t.fields?.map(n=>re.fromSdkField(n)).filter(n=>n!=null),i.passwordHistory=t.passwordHistory?.map(n=>le.fromSdkPasswordHistory(n)).filter(n=>n!=null),i.creationDate=new Date(t.creationDate),i.revisionDate=new Date(t.revisionDate),i.deletedDate=t.deletedDate?new Date(t.deletedDate):void 0,i.archivedDate=t.archivedDate?new Date(t.archivedDate):void 0,i.reprompt=t.reprompt,i.login=ae.fromSdkLogin(t.login),i.secureNote=ce.fromSdkSecureNote(t.secureNote),i.card=ie.fromSdkCard(t.card),i.identity=ne.fromSdkIdentity(t.identity),i.sshKey=de.fromSdkSshKey(t.sshKey),i}};var ot=class r{constructor(e){this.name=e.name??"",this.id=e.id??"",this.revisionDate=e.revisionDate??new Date().toISOString()}static fromJSON(e){return e==null?null:new r({id:e.id,name:e.name,revisionDate:e.revisionDate})}};var j=class r{constructor(e){this.id="";this.name="";if(!e){this.revisionDate=new Date;return}this.id=e.id,this.revisionDate=e.revisionDate}static fromJSON(e){let t=new r;return t.id=e.id??"",t.name=e.name??"",e.revisionDate!=null&&(t.revisionDate=new Date(e.revisionDate)),t}};var ue=class r extends h{constructor(t){super();this.id="";this.name=new o("");this.revisionDate=new Date;t!=null&&(this.id=t.id,this.name=new o(t.name),this.revisionDate=new Date(t.revisionDate))}decrypt(t){return this.decryptObj(this,new j(this),["name"],t)}async decryptWithKey(t,i){let n=new j;n.id=this.id,n.revisionDate=this.revisionDate;try{n.name=await i.decryptString(this.name,t)}catch(c){throw console.error("[Folder] Error decrypting folder",c),c}return n}static fromJSON(t){if(t==null)return null;let i=new r;return i.id=t.id,i.name=o.fromJSON(t.name),i.revisionDate=new Date(t.revisionDate),i}};function m(r){return r==null?null:typeof r=="string"?r:r?.encryptedString}var st=class r{constructor(){this.name=""}static template(){let e=new r;return e.name="Folder name",e}static toView(e,t=new j){return t.name=e.name,t}static toDomain(e,t=new ue){return t.name=new o(e.name),t}build(e){this.name=m(e.name??"")??""}};var at=class extends st{static toView(e,t=new j){return t.id=e.id,super.toView(e,t)}static toDomain(e,t=new ue){return t.id=e.id,super.toDomain(e,t)}build(e){this.id=e.id,super.build(e)}};var Ue=class r{static template(){let e=new r;return e.cardholderName="John Doe",e.brand="visa",e.number="4242424242424242",e.expMonth="04",e.expYear="2023",e.code="123",e}static toView(e,t=new F){return t.cardholderName=e.cardholderName,t.brand=e.brand,t.number=e.number,t.expMonth=e.expMonth,t.expYear=e.expYear,t.code=e.code,t}static toDomain(e,t=new ie){return t.cardholderName=e.cardholderName!=null?new o(e.cardholderName):null,t.brand=e.brand!=null?new o(e.brand):null,t.number=e.number!=null?new o(e.number):null,t.expMonth=e.expMonth!=null?new o(e.expMonth):null,t.expYear=e.expYear!=null?new o(e.expYear):null,t.code=e.code!=null?new o(e.code):null,t}constructor(e){e!=null&&(this.cardholderName=m(e.cardholderName),this.brand=m(e.brand),this.number=m(e.number),this.expMonth=m(e.expMonth),this.expYear=m(e.expYear),this.code=m(e.code))}};var Ee=class r{static template(){let e=new r;return e.name="Field name",e.value="Some value",e.type=A.Text,e}static toView(e,t=new Z){return t.type=e.type,t.value=e.value,t.name=e.name,t.linkedId=e.linkedId,t}static toDomain(e,t=new re){return t.type=e.type,t.value=e.value!=null?new o(e.value):null,t.name=e.name!=null?new o(e.name):null,t.linkedId=e.linkedId,t}constructor(e){e!=null&&(this.name=m(e.name),this.value=m(e.value),this.type=e.type,this.linkedId=e.linkedId)}};var Ce=class r{static template(){let e=new r;return e.title="Mr",e.firstName="John",e.middleName="William",e.lastName="Doe",e.address1="123 Any St",e.address2="Apt #123",e.address3=null,e.city="New York",e.state="NY",e.postalCode="10001",e.country="US",e.company="Acme Inc.",e.email="john@company.com",e.phone="5555551234",e.ssn="000-123-4567",e.username="jdoe",e.passportNumber="US-123456789",e.licenseNumber="D123-12-123-12333",e}static toView(e,t=new V){return t.title=e.title,t.firstName=e.firstName,t.middleName=e.middleName,t.lastName=e.lastName,t.address1=e.address1,t.address2=e.address2,t.address3=e.address3,t.city=e.city,t.state=e.state,t.postalCode=e.postalCode,t.country=e.country,t.company=e.company,t.email=e.email,t.phone=e.phone,t.ssn=e.ssn,t.username=e.username,t.passportNumber=e.passportNumber,t.licenseNumber=e.licenseNumber,t}static toDomain(e,t=new ne){return t.title=e.title!=null?new o(e.title):null,t.firstName=e.firstName!=null?new o(e.firstName):null,t.middleName=e.middleName!=null?new o(e.middleName):null,t.lastName=e.lastName!=null?new o(e.lastName):null,t.address1=e.address1!=null?new o(e.address1):null,t.address2=e.address2!=null?new o(e.address2):null,t.address3=e.address3!=null?new o(e.address3):null,t.city=e.city!=null?new o(e.city):null,t.state=e.state!=null?new o(e.state):null,t.postalCode=e.postalCode!=null?new o(e.postalCode):null,t.country=e.country!=null?new o(e.country):null,t.company=e.company!=null?new o(e.company):null,t.email=e.email!=null?new o(e.email):null,t.phone=e.phone!=null?new o(e.phone):null,t.ssn=e.ssn!=null?new o(e.ssn):null,t.username=e.username!=null?new o(e.username):null,t.passportNumber=e.passportNumber!=null?new o(e.passportNumber):null,t.licenseNumber=e.licenseNumber!=null?new o(e.licenseNumber):null,t}constructor(e){e!=null&&(this.title=m(e.title),this.firstName=m(e.firstName),this.middleName=m(e.middleName),this.lastName=m(e.lastName),this.address1=m(e.address1),this.address2=m(e.address2),this.address3=m(e.address3),this.city=m(e.city),this.state=m(e.state),this.postalCode=m(e.postalCode),this.country=m(e.country),this.company=m(e.company),this.email=m(e.email),this.phone=m(e.phone),this.ssn=m(e.ssn),this.username=m(e.username),this.passportNumber=m(e.passportNumber),this.licenseNumber=m(e.licenseNumber))}};var Oe=class r{static template(){let e=new r;return e.credentialId="keyId",e.keyType="keyType",e.keyAlgorithm="keyAlgorithm",e.keyCurve="keyCurve",e.keyValue="keyValue",e.rpId="rpId",e.userHandle="userHandle",e.userName="userName",e.counter="counter",e.rpName="rpName",e.userDisplayName="userDisplayName",e.discoverable="false",e.creationDate=null,e}static toView(e,t=new J){return t.credentialId=e.credentialId,t.keyType=e.keyType,t.keyAlgorithm=e.keyAlgorithm,t.keyCurve=e.keyCurve,t.keyValue=e.keyValue,t.rpId=e.rpId,t.userHandle=e.userHandle,t.userName=e.userName,t.counter=parseInt(e.counter),t.rpName=e.rpName,t.userDisplayName=e.userDisplayName,t.discoverable=e.discoverable==="true",t.creationDate=new Date(e.creationDate),t}static toDomain(e,t=new oe){return t.credentialId=e.credentialId!=null?new o(e.credentialId):null,t.keyType=e.keyType!=null?new o(e.keyType):null,t.keyAlgorithm=e.keyAlgorithm!=null?new o(e.keyAlgorithm):null,t.keyCurve=e.keyCurve!=null?new o(e.keyCurve):null,t.keyValue=e.keyValue!=null?new o(e.keyValue):null,t.rpId=e.rpId!=null?new o(e.rpId):null,t.userHandle=e.userHandle!=null?new o(e.userHandle):null,t.userName=e.userName!=null?new o(e.userName):null,t.counter=e.counter!=null?new o(e.counter):null,t.rpName=e.rpName!=null?new o(e.rpName):null,t.userDisplayName=e.userDisplayName!=null?new o(e.userDisplayName):null,t.discoverable=e.discoverable!=null?new o(e.discoverable):null,t.creationDate=e.creationDate!=null?new Date(e.creationDate):null,t}constructor(e){e!=null&&(this.credentialId=m(e.credentialId),this.keyType=m(e.keyType),this.keyAlgorithm=m(e.keyAlgorithm),this.keyCurve=m(e.keyCurve),this.keyValue=m(e.keyValue),this.rpId=m(e.rpId),this.userHandle=m(e.userHandle),this.userName=m(e.userName),this.counter=m(e instanceof J?String(e.counter):e.counter),this.rpName=m(e.rpName),this.userDisplayName=m(e.userDisplayName),this.discoverable=m(e instanceof J?String(e.discoverable):e.discoverable),this.creationDate=e.creationDate)}};var Ie=class r{constructor(e){this.match=null;e!=null&&(this.uri=m(e.uri),"uriChecksum"in e&&(this.uriChecksum=e.uriChecksum?.encryptedString),this.match=e.match)}static template(){let e=new r;return e.uri="https://google.com",e.match=null,e}static toView(e,t=new X){return t.uri=e.uri,t.match=e.match,t}static toDomain(e,t=new se){return t.uri=e.uri!=null?new o(e.uri):null,t.uriChecksum=e.uriChecksum!=null?new o(e.uriChecksum):null,t.match=e.match,t}};var Re=class r{static template(){let e=new r;return e.uris=[],e.username="jdoe",e.password="myp@ssword123",e.totp="JBSWY3DPEHPK3PXP",e.fido2Credentials=[],e}static toView(e,t=new I){return e.uris!=null&&(t.uris=e.uris.map(i=>Ie.toView(i))),t.username=e.username,t.password=e.password,t.totp=e.totp,e.fido2Credentials!=null&&(t.fido2Credentials=e.fido2Credentials.map(i=>Oe.toView(i))),t}static toDomain(e,t=new ae){return e.uris!=null&&(t.uris=e.uris.map(i=>Ie.toDomain(i))),t.username=e.username!=null?new o(e.username):null,t.password=e.password!=null?new o(e.password):null,t.totp=e.totp!=null?new o(e.totp):null,e.fido2Credentials!=null&&(t.fido2Credentials=e.fido2Credentials.map(i=>Oe.toDomain(i))),t}constructor(e){e!=null&&(e.uris!=null&&(this.uris=e.uris.map(t=>new Ie(t))),e.fido2Credentials!=null&&(this.fido2Credentials=e.fido2Credentials.map(t=>new Oe(t))),this.username=m(e.username),this.password=m(e.password),this.totp=m(e.totp))}};var Ne=class r{constructor(e){this.lastUsedDate=null;e!=null&&(this.password=m(e.password),this.lastUsedDate=e.lastUsedDate)}static template(){let e=new r;return e.password=null,e.lastUsedDate=null,e}static toView(e,t=new Q){return t.password=e.password,t.lastUsedDate=e.lastUsedDate?new Date(e.lastUsedDate):null,t}static toDomain(e,t=new le){return t.password=e.password!=null?new o(e.password):null,t.lastUsedDate=e.lastUsedDate?new Date(e.lastUsedDate):null,t}};var Me=class r{static template(){let e=new r;return e.type=q.Generic,e}static toView(e,t=new _){return t.type=e.type,t}static toDomain(e,t=new ce){return t.type=e.type,t}constructor(e){e!=null&&(this.type=e.type)}};var Le=class r{static template(){let e=new r;return e.privateKey="",e.publicKey="",e.keyFingerprint="",e}static toView(e,t=new z){if(e!=null){if(!e.privateKey||e.privateKey.trim()==="")throw new Error("SSH key private key is required.");if(!e.publicKey||e.publicKey.trim()==="")throw new Error("SSH key public key is required.");if(!e.keyFingerprint||e.keyFingerprint.trim()==="")throw new Error("SSH key fingerprint is required.");return t.privateKey=e.privateKey,t.publicKey=e.publicKey,t.keyFingerprint=e.keyFingerprint,t}}static toDomain(e,t=new de){return t.privateKey=new o(e.privateKey),t.publicKey=new o(e.publicKey),t.keyFingerprint=new o(e.keyFingerprint),t}constructor(e){e!=null&&(this.privateKey=m(e.privateKey),this.publicKey=m(e.publicKey),this.keyFingerprint=m(e.keyFingerprint))}};var lt=class r{constructor(){this.passwordHistory=null;this.revisionDate=null;this.creationDate=null;this.deletedDate=null;this.archivedDate=null}static template(){let e=new r;return e.organizationId=null,e.collectionIds=null,e.folderId=null,e.type=l.Login,e.name="Item name",e.notes="Some notes about this item.",e.favorite=!1,e.fields=[],e.login=null,e.secureNote=null,e.card=null,e.identity=null,e.sshKey=null,e.reprompt=D.None,e.passwordHistory=[],e.creationDate=null,e.revisionDate=null,e.deletedDate=null,e.archivedDate=null,e}static toView(e,t=new Ae){if(t.type=e.type,t.folderId=e.folderId,t.organizationId==null&&(t.organizationId=e.organizationId),t.collectionIds||e.collectionIds){let i=new Set((t.collectionIds??[]).concat(e.collectionIds??[]));t.collectionIds=Array.from(i.values())}switch(t.name=e.name,t.notes=e.notes,t.favorite=e.favorite,t.reprompt=e.reprompt??D.None,t.key=e.key!=null?new o(e.key):null,e.fields!=null&&(t.fields=e.fields.map(i=>Ee.toView(i))),e.type){case l.Login:t.login=Re.toView(e.login);break;case l.SecureNote:t.secureNote=Me.toView(e.secureNote);break;case l.Card:t.card=Ue.toView(e.card);break;case l.Identity:t.identity=Ce.toView(e.identity);break;case l.SshKey:t.sshKey=Le.toView(e.sshKey);break}return e.passwordHistory!=null&&(t.passwordHistory=e.passwordHistory.map(i=>Ne.toView(i))),t.creationDate=e.creationDate?new Date(e.creationDate):t.creationDate,t.revisionDate=e.revisionDate?new Date(e.revisionDate):t.revisionDate,t.deletedDate=e.deletedDate?new Date(e.deletedDate):t.deletedDate,t.archivedDate=e.archivedDate?new Date(e.archivedDate):t.archivedDate,t}static toDomain(e,t=new Ke){switch(t.type=e.type,t.folderId=e.folderId,t.organizationId==null&&(t.organizationId=e.organizationId),t.name=e.name!=null?new o(e.name):null,t.notes=e.notes!=null?new o(e.notes):null,t.favorite=e.favorite,t.reprompt=e.reprompt??D.None,t.key=e.key!=null?new o(e.key):null,e.fields!=null&&(t.fields=e.fields.map(i=>Ee.toDomain(i))),e.type){case l.Login:t.login=Re.toDomain(e.login);break;case l.SecureNote:t.secureNote=Me.toDomain(e.secureNote);break;case l.Card:t.card=Ue.toDomain(e.card);break;case l.Identity:t.identity=Ce.toDomain(e.identity);break;case l.SshKey:t.sshKey=Le.toDomain(e.sshKey);break}return e.passwordHistory!=null&&(t.passwordHistory=e.passwordHistory.map(i=>Ne.toDomain(i))),t.creationDate=e.creationDate?new Date(e.creationDate):null,t.revisionDate=e.revisionDate?new Date(e.revisionDate):null,t.deletedDate=e.deletedDate?new Date(e.deletedDate):null,t.archivedDate=e.archivedDate?new Date(e.archivedDate):null,t}build(e){switch(this.organizationId=e.organizationId,this.folderId=e.folderId,this.type=e.type,this.reprompt=e.reprompt,this.name=m(e.name),this.notes=m(e.notes),"key"in e&&(this.key=e.key?.encryptedString),this.favorite=e.favorite,e.fields!=null&&(this.fields=e.fields.map(t=>new Ee(t))),e.type){case l.Login:this.login=new Re(e.login);break;case l.SecureNote:this.secureNote=new Me(e.secureNote);break;case l.Card:this.card=new Ue(e.card);break;case l.Identity:this.identity=new Ce(e.identity);break;case l.SshKey:this.sshKey=new Le(e.sshKey);break}e.passwordHistory!=null&&(this.passwordHistory=e.passwordHistory.map(t=>new Ne(t))),this.creationDate=e.creationDate,this.revisionDate=e.revisionDate,this.deletedDate=e.deletedDate,this.archivedDate=e.archivedDate}};var ct=class extends lt{build(e){this.id=e.id,super.build(e),this.collectionIds=e.collectionIds}};var We={SharedCollection:0,DefaultUserCollection:1};var ii=class extends d{constructor(t){super(t);this.type=We.SharedCollection;this.id=this.getResponseProperty("Id"),this.organizationId=this.getResponseProperty("OrganizationId"),this.name=this.getResponseProperty("Name"),this.externalId=this.getResponseProperty("ExternalId"),this.defaultUserCollectionEmail=this.getResponseProperty("DefaultUserCollectionEmail"),this.type=this.getResponseProperty("Type")??We.SharedCollection}},qe=class extends ii{constructor(e){super(e),this.readOnly=this.getResponseProperty("ReadOnly")||!1,this.manage=this.getResponseProperty("Manage")||!1,this.hidePasswords=this.getResponseProperty("HidePasswords")||!1,this.assigned=this.getResponseProperty("object")=="collectionDetails"}};var dt=class extends d{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.organizationId=this.getResponseProperty("OrganizationId"),this.type=this.getResponseProperty("Type"),this.data=this.getResponseProperty("Data"),this.enabled=this.getResponseProperty("Enabled"),this.canToggleState=this.getResponseProperty("CanToggleState")??!0,this.revisionDate=this.getResponseProperty("RevisionDate")}};var Fe=class extends d{constructor(e){super(e);let t=this.getResponseProperty("EncryptedPrivateKey");t&&(this.encryptedPrivateKey=new o(t));let i=this.getResponseProperty("EncryptedUserKey");i&&(this.encryptedUserKey=new o(i)),this.credentialId=this.getResponseProperty("CredentialId"),this.transports=this.getResponseProperty("Transports")||[]}};var oi=require("rxjs");var Ti=Symbol("active");function ut(r){return e=>e==null?null:e.map(t=>r(t))}function pt(r){return e=>{if(e==null)return null;let t={};return Object.entries(e).forEach(([i,n])=>{t[i]=r(n)}),t}}var K=class r{constructor(e,t,i){this.stateDefinition=e;this.key=t;this.options=i;if(i.deserializer==null)throw new Error(`'deserializer' is a required property on key ${this.errorKeyName}`);if(i.cleanupDelayMs<0)throw new Error(`'cleanupDelayMs' must be greater than or equal to 0. Value of ${i.cleanupDelayMs} passed to key ${this.errorKeyName} `);let{enableUpdateLogging:n=!1,enableRetrievalLogging:c=!1}=i.debug??{};this.debug={enableUpdateLogging:n,enableRetrievalLogging:c}}get deserializer(){return this.options.deserializer}get cleanupDelayMs(){return this.options.cleanupDelayMs<0?0:this.options.cleanupDelayMs??1e3}static array(e,t,i){return new r(e,t,{...i,deserializer:ut(n=>i.deserializer(n))})}static record(e,t,i){return new r(e,t,{...i,deserializer:pt(n=>i.deserializer(n))})}get fullName(){return`${this.stateDefinition.name}_${this.key}`}get errorKeyName(){return`${this.stateDefinition.name} > ${this.key}`}};var ir=/^[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i;function Ki(r){return ir.test(r)}var rr=Symbol("UserKeyDefinition"),Ui;Ui=rr;var mt=class mt{constructor(e,t,i){this.stateDefinition=e;this.key=t;this.options=i;this[Ui]=!0;if(i.deserializer==null)throw new Error(`'deserializer' is a required property on key ${this.errorKeyName}`);if(i.cleanupDelayMs<0)throw new Error(`'cleanupDelayMs' must be greater than or equal to 0. Value of ${i.cleanupDelayMs} passed to key ${this.errorKeyName} `);this.clearOn=Array.from(new Set(i.clearOn));let{enableUpdateLogging:n=!1,enableRetrievalLogging:c=!1}=i.debug??{};this.debug={enableUpdateLogging:n,enableRetrievalLogging:c}}get deserializer(){return this.options.deserializer}get cleanupDelayMs(){return this.options.cleanupDelayMs<0?0:this.options.cleanupDelayMs??1e3}static array(e,t,i){return new mt(e,t,{...i,deserializer:ut(n=>i.deserializer(n))})}static record(e,t,i){return new mt(e,t,{...i,deserializer:pt(n=>i.deserializer(n))})}get fullName(){return`${this.stateDefinition.name}_${this.key}`}buildKey(e){if(!Ki(e))throw new Error(`You cannot build a user key without a valid UserId, building for key ${this.fullName}`);return`user_${e}_${this.stateDefinition.name}_${this.key}`}get errorKeyName(){return`${this.stateDefinition.name} > ${this.key}`}},v=mt;var s=class{constructor(e,t,i){this.name=e;this.defaultStorageLocation=t;this.storageLocationOverrides=i??{}}};var Hu=new s("organizations","disk"),Ei=new s("policies","disk"),Gu=new s("providers","disk"),$u=new s("organizationManagementPreferences","disk",{web:"disk-local"}),Yu=new s("showDeleteManagedUserWarning","disk",{web:"disk-local"}),Ju=new s("autoConfirm","disk",{web:"disk-local"}),Wu=new s("billing","disk"),qu=new s("billing","memory"),Ze=new s("account","disk"),Zu=new s("account","memory"),Xu=new s("authRequestLocal","disk",{web:"disk-local"}),Qu=new s("avatar","disk",{web:"disk-local"}),ju=new s("deviceTrust","disk",{web:"disk-local",browser:"disk-backup-local-storage"}),ep=new s("loginEmail","disk",{web:"disk-local"}),tp=new s("loginEmail","memory"),ip=new s("loginStrategy","memory"),rp=new s("masterPassword","disk"),np=new s("masterPassword","memory"),op=new s("masterPasswordUnlock","disk"),sp=new s("router","disk"),ap=new s("ssoLogin","disk"),lp=new s("ssoLoginLocal","disk",{web:"disk-local"}),cp=new s("token","disk"),dp=new s("tokenDiskLocal","disk",{web:"disk-local"}),up=new s("token","memory"),pp=new s("sendAccess","disk"),mp=new s("twoFactor","memory"),gp=new s("userDecryptionOptions","disk"),yp=new s("organizationInvite","disk"),ri=new s("vaultTimeoutSettings","disk",{web:"disk-local"}),fp=new s("badgeSettings","disk"),hp=new s("userNotificationSettings","disk"),wp=new s("domainSettings","disk"),bp=new s("autofillSettings","disk"),vp=new s("autofillSettingsLocal","disk",{web:"disk-local"}),Sp=new s("autotypeSettings","disk"),kp=new s("newWebLayoutBanner","disk",{web:"disk-local"}),Dp=new s("bitSideNav","disk"),Pp=new s("phishingDetection","disk"),xp=new s("applicationId","disk",{web:"disk-local"}),ni=new s("clearEvent","disk"),Ap=new s("config","disk",{web:"disk-local"}),Tp=new s("desktopSettings","disk"),Kp=new s("environment","disk"),Up=new s("environment","memory"),Ep=new s("interProcessCommunication","memory"),Cp=new s("popupView","memory",{browser:"memory-large-object"}),Op=new s("sync","disk",{web:"memory"}),Ip=new s("theming","disk",{web:"disk-local"}),Rp=new s("translation","disk",{web:"disk-local"}),Np=new s("animation","disk"),Mp=new s("taskScheduler","disk"),Lp=new s("extensionInitialInstall","disk"),Fp=new s("webPushSubscription","disk",{web:"disk-local"}),Vp=new s("popupStyle","disk"),_p=new s("smOnboarding","disk",{web:"disk-local"}),zp=new s("extension","disk"),Bp=new s("generator","disk"),Hp=new s("generator","memory"),Gp=new s("sendBrowser","memory"),$p=new s("eventCollection","disk"),Yp=new s("encryptedSend","disk",{web:"memory"}),Jp=new s("decryptedSend","memory",{browser:"memory-large-object"}),Wp=new s("sendAccessAuth","memory"),qp=new s("collection","disk",{web:"memory"}),Zp=new s("decryptedCollections","memory",{browser:"memory-large-object"}),Xp=new s("folder","disk",{web:"memory"}),Qp=new s("decryptedFolders","memory",{browser:"memory-large-object"}),jp=new s("vaultFilter","disk",{web:"disk-local"}),em=new s("vaultOnboarding","disk",{web:"disk-local"}),tm=new s("vaultSettings","disk",{web:"disk-local"}),im=new s("vaultBrowser","memory",{browser:"memory-large-object"}),rm=new s("vaultSearch","memory",{browser:"memory-large-object"}),nm=new s("ciphers","disk",{web:"memory"}),om=new s("ciphersLocal","disk",{web:"disk-local"}),sm=new s("ciphersMemory","memory",{browser:"memory-large-object"}),am=new s("bannersDismissed","disk"),lm=new s("vaultAppearance","disk"),cm=new s("securityTasks","disk"),dm=new s("atRiskPasswordsPage","disk"),um=new s("notifications","disk"),pm=new s("nudges","disk",{web:"disk-local"}),mm=new s("setupExtensionDismissed","disk",{web:"disk-local"}),gm=new s("vaultBrowserIntroCarousel","disk"),ym=new s("vaultAtRiskPasswords","memory"),me=new s("biometricSettings","disk"),fm=new s("encryptedMigration","disk"),hm=new s("pinUnlock","disk"),wm=new s("pinUnlock","memory"),Ve=new s("crypto","disk"),Ci=new s("crypto","memory"),Oi=new s("kdfConfig","disk"),bm=new s("keyConnector","disk");var U=new Error("Irreversible migration");var nr=require("rxjs");var _e=require("rxjs");var ze=require("rxjs");var W=require("rxjs");var Ii=require("rxjs");var gt=require("rxjs");var sr=require("rxjs");var ar=require("rxjs");var lr=K.array(ni,"lock",{deserializer:r=>r}),cr=K.array(ni,"logout",{deserializer:r=>r});var dr=require("rxjs");var pr=new v(me,"biometricUnlockEnabled",{deserializer:r=>r,clearOn:[]}),mr=new v(me,"clientKeyHalf",{deserializer:r=>r,clearOn:["logout"]}),gr=K.record(me,"promptCancelled",{deserializer:r=>r}),yr=new v(me,"promptAutomatically",{deserializer:r=>r,clearOn:[]}),fr=new K(me,"fingerprintValidated",{deserializer:r=>r}),hr=new K(me,"lastProcessReload",{deserializer:r=>new Date(r)});var Ir=pi(require("big-integer")),H=require("rxjs");var B=require("rxjs");var Be=require("rxjs");var R=require("rxjs");var ck=K.record(Ze,"accounts",{deserializer:r=>({...r,creationDate:r.creationDate?new Date(r.creationDate):void 0})}),dk=new K(Ze,"activeAccountId",{deserializer:r=>r}),uk=K.record(Ze,"activity",{deserializer:r=>new Date(r)}),pk=new v(Ze,"verifyNewDeviceLogin",{deserializer:r=>r,clearOn:["logout"]});var Ri=(0,R.map)(r=>{if(r==null)throw new Error("Null or undefined account");return r.id}),mk=(0,R.map)(r=>r?.id??null);var wr=v.record(Ei,"policies",{deserializer:r=>r,clearOn:["logout"]});var vr=(0,Be.map)(r=>r.at(0)??void 0);var Sr=new v(ri,"vaultTimeoutAction",{deserializer:r=>r,clearOn:[]}),si=new v(ri,"vaultTimeout",{deserializer:r=>r,clearOn:[]});var ai=require("rxjs");var Pr=require("rxjs");var Ar=require("rxjs");var Kr=require("rxjs");var Ur=v.record(Ve,"organizationKeys",{deserializer:r=>r,clearOn:["logout"]});var Er=v.record(Ve,"providerKeys",{deserializer:r=>r,clearOn:["logout"]});var Cr=new v(Ve,"everHadUserKey",{deserializer:r=>r,clearOn:["logout"]}),Or=new v(Ci,"userKey",{deserializer:r=>$.fromJSON(r),clearOn:["logout","lock"]});var ge=class{constructor(e,t,i){this.min=e;this.max=t;this.defaultValue=i;if(e>t)throw new Error(`${e} is greater than ${t}.`);if(this.inRange(i)===!1)throw new Error("Default value is not in range.")}inRange(e){return e>=this.min&&e<=this.max}};var E=class r{constructor(e){this.kdfType=0;this.iterations=e??r.ITERATIONS.defaultValue}static{this.ITERATIONS=new ge(6e5,2e6,6e5)}static{this.PRELOGIN_ITERATIONS_MIN=5e3}validateKdfConfigForSetting(){if(!r.ITERATIONS.inRange(this.iterations))throw new Error(`PBKDF2 iterations must be between ${r.ITERATIONS.min} and ${r.ITERATIONS.max}`)}validateKdfConfigForPrelogin(){if(r.PRELOGIN_ITERATIONS_MIN>this.iterations)throw new Error(`PBKDF2 iterations must be at least ${r.PRELOGIN_ITERATIONS_MIN}, but was ${this.iterations}; possible pre-login downgrade attack detected.`)}static fromJSON(e){return new r(e.iterations)}toSdkConfig(){return{pBKDF2:{iterations:this.iterations}}}},N=class r{constructor(e,t,i){this.kdfType=1;this.iterations=e??r.ITERATIONS.defaultValue,this.memory=t??r.MEMORY.defaultValue,this.parallelism=i??r.PARALLELISM.defaultValue}static{this.MEMORY=new ge(16,1024,64)}static{this.PARALLELISM=new ge(1,16,4)}static{this.ITERATIONS=new ge(2,10,3)}static{this.PRELOGIN_MEMORY_MIN=16}static{this.PRELOGIN_PARALLELISM_MIN=1}static{this.PRELOGIN_ITERATIONS_MIN=2}validateKdfConfigForSetting(){if(!r.ITERATIONS.inRange(this.iterations))throw new Error(`Argon2 iterations must be between ${r.ITERATIONS.min} and ${r.ITERATIONS.max}`);if(!r.MEMORY.inRange(this.memory))throw new Error(`Argon2 memory must be between ${r.MEMORY.min} MiB and ${r.MEMORY.max} MiB`);if(!r.PARALLELISM.inRange(this.parallelism))throw new Error(`Argon2 parallelism must be between ${r.PARALLELISM.min} and ${r.PARALLELISM.max}.`)}validateKdfConfigForPrelogin(){if(r.PRELOGIN_ITERATIONS_MIN>this.iterations)throw new Error(`Argon2 iterations must be at least ${r.PRELOGIN_ITERATIONS_MIN}, but was ${this.iterations}; possible pre-login downgrade attack detected.`);if(r.PRELOGIN_MEMORY_MIN>this.memory)throw new Error(`Argon2 memory must be at least ${r.PRELOGIN_MEMORY_MIN} MiB, but was ${this.memory} MiB; possible pre-login downgrade attack detected.`);if(r.PRELOGIN_PARALLELISM_MIN>this.parallelism)throw new Error(`Argon2 parallelism must be at least ${r.PRELOGIN_PARALLELISM_MIN}, but was ${this.parallelism}; possible pre-login downgrade attack detected.`)}static fromJSON(e){return new r(e.iterations,e.memory,e.parallelism)}toSdkConfig(){return{argon2id:{iterations:this.iterations,memory:this.memory,parallelism:this.parallelism}}}};function li(r){if("pBKDF2"in r)return new E(r.pBKDF2.iterations);if("argon2id"in r)return new N(r.argon2id.iterations,r.argon2id.memory,r.argon2id.parallelism);throw new Error("Unsupported KDF type")}var Rr=new E(E.ITERATIONS.defaultValue);var Nr=require("rxjs");var kP=new v(Oi,"kdfConfig",{deserializer:r=>r==null?null:r.kdfType===0?E.fromJSON(r):N.fromJSON(r),clearOn:["logout"]});var ci=require("rxjs");var yt=class extends d{constructor(e){super(e);let t=this.getResponseProperty("KdfType");if(t==null||typeof t!="number")throw new Error("KDF config response does not contain a valid KDF type");this.kdfType=t;let i=this.getResponseProperty("Iterations");if(i==null||typeof i!="number")throw new Error("KDF config response does not contain a valid number of iterations");if(this.iterations=i,this.kdfType===1){let n=this.getResponseProperty("Memory");if(n==null||typeof n!="number")throw new Error("KDF config response does not contain a valid memory size for Argon2id");let c=this.getResponseProperty("Parallelism");if(c==null||typeof c!="number")throw new Error("KDF config response does not contain a valid parallelism for Argon2id");this.memory=n,this.parallelism=c}}toKdfConfig(){switch(this.kdfType){case 1:return new N(this.iterations,this.memory,this.parallelism);case 0:return new E(this.iterations)}}};var ft=class r{constructor(e,t,i){this.salt=e;this.kdf=t;this.masterKeyWrappedUserKey=i}static fromSdk(e){return new r(e.salt,li(e.kdf),e.masterKeyWrappedUserKey)}toJSON(){return{salt:this.salt,kdf:this.kdf,masterKeyWrappedUserKey:this.masterKeyWrappedUserKey}}static fromJSON(e){return e==null?null:new r(e.salt,e.kdf.kdfType===0?E.fromJSON(e.kdf):N.fromJSON(e.kdf),e.masterKeyWrappedUserKey)}};var He=class extends d{constructor(e){super(e);let t=this.getResponseProperty("Salt");if(t==null||typeof t!="string")throw new Error("MasterPasswordUnlockResponse does not contain a valid salt");this.salt=t,this.kdf=new yt(this.getResponseProperty("Kdf"));let i=this.getResponseProperty("MasterKeyEncryptedUserKey");if(i==null||typeof i!="string")throw new Error("MasterPasswordUnlockResponse does not contain a valid master key encrypted user key");this.masterKeyWrappedUserKey=i}toMasterPasswordUnlockData(){return new ft(this.salt,this.kdf.toKdfConfig(),this.masterKeyWrappedUserKey)}};var ht=class extends d{constructor(e){super(e);let t=this.getResponseProperty("MasterPasswordUnlock");t!=null&&typeof t=="object"&&(this.masterPasswordUnlock=new He(t));let i=this.getResponseProperty("WebAuthnPrfOptions");i!=null&&Array.isArray(i)&&(this.webAuthnPrfOptions=i.map(n=>new Fe(n)))}};var wt=class extends d{constructor(e){super(e),this.type=this.getResponseProperty("Type"),this.domains=this.getResponseProperty("Domains"),this.excluded=this.getResponseProperty("Excluded")}};var bt=class extends d{constructor(t){super(t);this.globalEquivalentDomains=[];this.equivalentDomains=this.getResponseProperty("EquivalentDomains");let i=this.getResponseProperty("GlobalEquivalentDomains");i!=null?this.globalEquivalentDomains=i.map(n=>new wt(n)):this.globalEquivalentDomains=[]}};var vt=class{constructor(e){this.securityState=null;if(typeof e!="object"||e==null)throw new TypeError("Response must be an object");if(!("securityState"in e)||typeof e.securityState!="string")throw new TypeError("Response must contain a valid securityState");this.securityState=e.securityState}};var St=class{constructor(e){this.signedPublicKey=null;if(typeof e!="object"||e==null)throw new TypeError("Response must be an object");if(!("publicKey"in e)||typeof e.publicKey!="string")throw new TypeError("Response must contain a valid publicKey");if(this.publicKey=g.fromB64ToArray(e.publicKey),!("wrappedPrivateKey"in e)||typeof e.wrappedPrivateKey!="string")throw new TypeError("Response must contain a valid wrappedPrivateKey");this.wrappedPrivateKey=e.wrappedPrivateKey,"signedPublicKey"in e&&typeof e.signedPublicKey=="string"?this.signedPublicKey=e.signedPublicKey:this.signedPublicKey=null}};var kt=class{constructor(e){if(typeof e!="object"||e==null)throw new TypeError("Response must be an object");if(!("wrappedSigningKey"in e)||typeof e.wrappedSigningKey!="string")throw new TypeError("Response must contain a valid wrappedSigningKey");if(this.wrappedSigningKey=e.wrappedSigningKey,!("verifyingKey"in e)||typeof e.verifyingKey!="string")throw new TypeError("Response must contain a valid verifyingKey");this.verifyingKey=e.verifyingKey}};var Ge=class{constructor(e){this.signatureKeyPair=null;this.securityState=null;if(typeof e!="object"||e==null)throw new TypeError("Response must be an object");if(!("publicKeyEncryptionKeyPair"in e)||typeof e.publicKeyEncryptionKeyPair!="object")throw new TypeError("Response must contain a valid publicKeyEncryptionKeyPair");if(this.publicKeyEncryptionKeyPair=new St(e.publicKeyEncryptionKeyPair),"signatureKeyPair"in e&&typeof e.signatureKeyPair=="object"&&e.signatureKeyPair!=null&&(this.signatureKeyPair=new kt(e.signatureKeyPair)),"securityState"in e&&typeof e.securityState=="object"&&e.securityState!=null&&(this.securityState=new vt(e.securityState)),this.signatureKeyPair!==null&&this.securityState===null||this.signatureKeyPair===null&&this.securityState!==null)throw new TypeError("Both signatureKeyPair and securityState must be present or absent together")}toWrappedAccountCryptographicState(){if(this.signatureKeyPair===null&&this.securityState===null)return{V1:{private_key:this.publicKeyEncryptionKeyPair.wrappedPrivateKey}};if(this.signatureKeyPair!==null&&this.securityState!==null)return{V2:{private_key:this.publicKeyEncryptionKeyPair.wrappedPrivateKey,signing_key:this.signatureKeyPair.wrappedSigningKey,signed_public_key:this.publicKeyEncryptionKeyPair.signedPublicKey,security_state:this.securityState.securityState}};throw new Error("Both signatureKeyPair and securityState must be present or absent together")}isV2Encryption(){return this.signatureKeyPair!==null&&this.securityState!==null}};var $e=class extends d{constructor(e=null){if(super(e),e==null)return this;this.accessEventLogs=this.getResponseProperty("AccessEventLogs"),this.accessImportExport=this.getResponseProperty("AccessImportExport"),this.accessReports=this.getResponseProperty("AccessReports"),this.createNewCollections=this.getResponseProperty("CreateNewCollections"),this.editAnyCollection=this.getResponseProperty("EditAnyCollection"),this.deleteAnyCollection=this.getResponseProperty("DeleteAnyCollection"),this.manageCiphers=this.getResponseProperty("ManageCiphers"),this.manageGroups=this.getResponseProperty("ManageGroups"),this.manageSso=this.getResponseProperty("ManageSso"),this.managePolicies=this.getResponseProperty("ManagePolicies"),this.manageUsers=this.getResponseProperty("ManageUsers"),this.manageResetPassword=this.getResponseProperty("ManageResetPassword"),this.manageScim=this.getResponseProperty("ManageScim")}};var Ye=class extends d{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.name=this.getResponseProperty("Name"),this.usePolicies=this.getResponseProperty("UsePolicies"),this.useGroups=this.getResponseProperty("UseGroups"),this.useDirectory=this.getResponseProperty("UseDirectory"),this.useEvents=this.getResponseProperty("UseEvents"),this.useTotp=this.getResponseProperty("UseTotp"),this.use2fa=this.getResponseProperty("Use2fa"),this.useApi=this.getResponseProperty("UseApi"),this.useSso=this.getResponseProperty("UseSso"),this.useOrganizationDomains=this.getResponseProperty("UseOrganizationDomains"),this.useKeyConnector=this.getResponseProperty("UseKeyConnector")??!1,this.useScim=this.getResponseProperty("UseScim")??!1,this.useCustomPermissions=this.getResponseProperty("UseCustomPermissions")??!1,this.useResetPassword=this.getResponseProperty("UseResetPassword"),this.useSecretsManager=this.getResponseProperty("UseSecretsManager"),this.usePasswordManager=this.getResponseProperty("UsePasswordManager"),this.useActivateAutofillPolicy=this.getResponseProperty("UseActivateAutofillPolicy"),this.useAutomaticUserConfirmation=this.getResponseProperty("UseAutomaticUserConfirmation"),this.selfHost=this.getResponseProperty("SelfHost"),this.usersGetPremium=this.getResponseProperty("UsersGetPremium"),this.seats=this.getResponseProperty("Seats"),this.maxCollections=this.getResponseProperty("MaxCollections"),this.maxStorageGb=this.getResponseProperty("MaxStorageGb"),this.key=this.getResponseProperty("Key"),this.hasPublicAndPrivateKeys=this.getResponseProperty("HasPublicAndPrivateKeys"),this.status=this.getResponseProperty("Status"),this.type=this.getResponseProperty("Type"),this.enabled=this.getResponseProperty("Enabled"),this.ssoBound=this.getResponseProperty("SsoBound"),this.identifier=this.getResponseProperty("Identifier"),this.permissions=new $e(this.getResponseProperty("permissions")),this.resetPasswordEnrolled=this.getResponseProperty("ResetPasswordEnrolled"),this.userId=this.getResponseProperty("UserId"),this.organizationUserId=this.getResponseProperty("OrganizationUserId"),this.providerId=this.getResponseProperty("ProviderId"),this.providerName=this.getResponseProperty("ProviderName"),this.providerType=this.getResponseProperty("ProviderType"),this.familySponsorshipFriendlyName=this.getResponseProperty("FamilySponsorshipFriendlyName"),this.familySponsorshipAvailable=this.getResponseProperty("FamilySponsorshipAvailable"),this.productTierType=this.getResponseProperty("ProductTierType"),this.keyConnectorEnabled=this.getResponseProperty("KeyConnectorEnabled")??!1,this.keyConnectorUrl=this.getResponseProperty("KeyConnectorUrl");let t=this.getResponseProperty("FamilySponsorshipLastSyncDate");t&&(this.familySponsorshipLastSyncDate=new Date(t));let i=this.getResponseProperty("FamilySponsorshipValidUntil");i&&(this.familySponsorshipValidUntil=new Date(i)),this.familySponsorshipToDelete=this.getResponseProperty("FamilySponsorshipToDelete"),this.accessSecretsManager=this.getResponseProperty("AccessSecretsManager"),this.limitCollectionCreation=this.getResponseProperty("LimitCollectionCreation"),this.limitCollectionDeletion=this.getResponseProperty("LimitCollectionDeletion"),this.limitItemDeletion=this.getResponseProperty("LimitItemDeletion"),this.allowAdminAccessToAllCollectionItems=this.getResponseProperty("AllowAdminAccessToAllCollectionItems"),this.userIsManagedByOrganization=this.getResponseProperty("UserIsManagedByOrganization"),this.useAccessIntelligence=this.getResponseProperty("UseRiskInsights"),this.useAdminSponsoredFamilies=this.getResponseProperty("UseAdminSponsoredFamilies"),this.useDisableSMAdsForUsers=this.getResponseProperty("UseDisableSMAdsForUsers")??!1,this.isAdminInitiated=this.getResponseProperty("IsAdminInitiated"),this.ssoEnabled=this.getResponseProperty("SsoEnabled")??!1,this.ssoMemberDecryptionType=this.getResponseProperty("SsoMemberDecryptionType"),this.usePhishingBlocker=this.getResponseProperty("UsePhishingBlocker")??!1}};var Dt=class extends Ye{constructor(e){super(e),this.keyConnectorEnabled=!1}};var Pt=class extends d{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.name=this.getResponseProperty("Name"),this.key=this.getResponseProperty("Key"),this.status=this.getResponseProperty("Status"),this.type=this.getResponseProperty("Type"),this.enabled=this.getResponseProperty("Enabled"),this.permissions=new $e(this.getResponseProperty("permissions")),this.userId=this.getResponseProperty("UserId"),this.useEvents=this.getResponseProperty("UseEvents"),this.providerStatus=this.getResponseProperty("ProviderStatus"),this.providerType=this.getResponseProperty("ProviderType")}};var xt=class extends d{constructor(t){super(t);this.accountKeys=null;this.organizations=[];this.providers=[];this.providerOrganizations=[];this.id=this.getResponseProperty("Id"),this.name=this.getResponseProperty("Name"),this.email=this.getResponseProperty("Email"),this.emailVerified=this.getResponseProperty("EmailVerified"),this.premiumPersonally=this.getResponseProperty("Premium"),this.premiumFromOrganization=this.getResponseProperty("PremiumFromOrganization"),this.culture=this.getResponseProperty("Culture"),this.twoFactorEnabled=this.getResponseProperty("TwoFactorEnabled");let i=this.getResponseProperty("Key");i&&(this.key=new o(i)),this.getResponseProperty("AccountKeys")!=null&&(this.accountKeys=new Ge(this.getResponseProperty("AccountKeys"))),this.avatarColor=this.getResponseProperty("AvatarColor"),this.creationDate=this.getResponseProperty("CreationDate"),this.privateKey=this.getResponseProperty("PrivateKey"),this.securityStamp=this.getResponseProperty("SecurityStamp"),this.forcePasswordReset=this.getResponseProperty("ForcePasswordReset")??!1,this.usesKeyConnector=this.getResponseProperty("UsesKeyConnector")??!1,this.verifyDevices=this.getResponseProperty("VerifyDevices")??!0;let n=this.getResponseProperty("Organizations");n!=null&&(this.organizations=n.map(f=>new Ye(f)));let c=this.getResponseProperty("Providers");c!=null&&(this.providers=c.map(f=>new Pt(f)));let p=this.getResponseProperty("ProviderOrganizations");p!=null&&(this.providerOrganizations=p.map(f=>new Dt(f)))}};var At=class extends d{constructor(e=null){super(e),e!=null&&(this.id=this.getResponseProperty("Id"),this.fileName=this.getResponseProperty("FileName"),this.size=this.getResponseProperty("Size"),this.sizeName=this.getResponseProperty("SizeName"))}};var Tt=class extends d{constructor(e=null){super(e),e!=null&&(this.text=this.getResponseProperty("Text"),this.hidden=this.getResponseProperty("Hidden")||!1)}};var Kt=class extends d{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.accessId=this.getResponseProperty("AccessId"),this.type=this.getResponseProperty("Type"),this.authType=this.getResponseProperty("AuthType"),this.name=this.getResponseProperty("Name"),this.notes=this.getResponseProperty("Notes"),this.key=this.getResponseProperty("Key"),this.maxAccessCount=this.getResponseProperty("MaxAccessCount"),this.accessCount=this.getResponseProperty("AccessCount"),this.revisionDate=this.getResponseProperty("RevisionDate"),this.expirationDate=this.getResponseProperty("ExpirationDate"),this.deletionDate=this.getResponseProperty("DeletionDate"),this.password=this.getResponseProperty("Password"),this.emails=this.getResponseProperty("Emails"),this.disable=this.getResponseProperty("Disabled")||!1,this.hideEmail=this.getResponseProperty("HideEmail")||!1,this.authType=this.getResponseProperty("AuthType");let t=this.getResponseProperty("Text");t!=null&&(this.text=new Tt(t));let i=this.getResponseProperty("File");i!=null&&(this.file=new At(i))}};var Ut=class extends d{constructor(e=null){super(e),e!=null&&(this.cardholderName=this.getResponseProperty("CardholderName"),this.brand=this.getResponseProperty("Brand"),this.number=this.getResponseProperty("Number"),this.expMonth=this.getResponseProperty("ExpMonth"),this.expYear=this.getResponseProperty("ExpYear"),this.code=this.getResponseProperty("Code"))}};var Et=class extends d{constructor(e=null){super(e),e!=null&&(this.type=this.getResponseProperty("Type"),this.name=this.getResponseProperty("Name"),this.value=this.getResponseProperty("Value"),this.linkedId=this.getResponseProperty("linkedId"))}};var Ct=class extends d{constructor(e=null){super(e),e!=null&&(this.title=this.getResponseProperty("Title"),this.firstName=this.getResponseProperty("FirstName"),this.middleName=this.getResponseProperty("MiddleName"),this.lastName=this.getResponseProperty("LastName"),this.address1=this.getResponseProperty("Address1"),this.address2=this.getResponseProperty("Address2"),this.address3=this.getResponseProperty("Address3"),this.city=this.getResponseProperty("City"),this.state=this.getResponseProperty("State"),this.postalCode=this.getResponseProperty("PostalCode"),this.country=this.getResponseProperty("Country"),this.company=this.getResponseProperty("Company"),this.email=this.getResponseProperty("Email"),this.phone=this.getResponseProperty("Phone"),this.ssn=this.getResponseProperty("SSN"),this.username=this.getResponseProperty("Username"),this.passportNumber=this.getResponseProperty("PassportNumber"),this.licenseNumber=this.getResponseProperty("LicenseNumber"))}};var Ot=class extends d{constructor(e=null){super(e),e!=null&&(this.credentialId=this.getResponseProperty("CredentialId"),this.keyType=this.getResponseProperty("KeyType"),this.keyAlgorithm=this.getResponseProperty("KeyAlgorithm"),this.keyCurve=this.getResponseProperty("KeyCurve"),this.keyValue=this.getResponseProperty("keyValue"),this.rpId=this.getResponseProperty("RpId"),this.userHandle=this.getResponseProperty("UserHandle"),this.userName=this.getResponseProperty("UserName"),this.counter=this.getResponseProperty("Counter"),this.rpName=this.getResponseProperty("RpName"),this.userDisplayName=this.getResponseProperty("UserDisplayName"),this.discoverable=this.getResponseProperty("Discoverable"),this.creationDate=this.getResponseProperty("CreationDate"))}};var It=class extends d{constructor(t=null){super(t);this.match=null;if(t==null)return;this.uri=this.getResponseProperty("Uri"),this.uriChecksum=this.getResponseProperty("UriChecksum");let i=this.getResponseProperty("Match");this.match=i??null}};var Rt=class extends d{constructor(e=null){if(super(e),e==null)return;this.username=this.getResponseProperty("Username"),this.password=this.getResponseProperty("Password"),this.passwordRevisionDate=this.getResponseProperty("PasswordRevisionDate"),this.totp=this.getResponseProperty("Totp"),this.autofillOnPageLoad=this.getResponseProperty("AutofillOnPageLoad");let t=this.getResponseProperty("Uris");t!=null&&(this.uris=t.map(n=>new It(n)));let i=this.getResponseProperty("Fido2Credentials");i!=null&&(this.fido2Credentials=i.map(n=>new Ot(n)))}};var Nt=class extends d{constructor(e=null){super(e),e!=null&&(this.type=this.getResponseProperty("Type"))}};var Mt=class extends d{constructor(e=null){super(e),e!=null&&(this.privateKey=this.getResponseProperty("PrivateKey"),this.publicKey=this.getResponseProperty("PublicKey"),this.keyFingerprint=this.getResponseProperty("KeyFingerprint"))}};var Lt=class extends d{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.url=this.getResponseProperty("Url"),this.fileName=this.getResponseProperty("FileName"),this.key=this.getResponseProperty("Key"),this.size=this.getResponseProperty("Size"),this.sizeName=this.getResponseProperty("SizeName")}};var Ft=class extends d{constructor(e){super(e),this.password=this.getResponseProperty("Password"),this.lastUsedDate=this.getResponseProperty("LastUsedDate")}};var Vt=class extends d{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.organizationId=this.getResponseProperty("OrganizationId"),this.folderId=this.getResponseProperty("FolderId")||null,this.type=this.getResponseProperty("Type"),this.name=this.getResponseProperty("Name"),this.notes=this.getResponseProperty("Notes"),this.favorite=this.getResponseProperty("Favorite")||!1,this.edit=!!this.getResponseProperty("Edit"),this.getResponseProperty("ViewPassword")==null?this.viewPassword=!0:this.viewPassword=this.getResponseProperty("ViewPassword"),this.permissions=new C(this.getResponseProperty("Permissions")),this.organizationUseTotp=this.getResponseProperty("OrganizationUseTotp"),this.revisionDate=this.getResponseProperty("RevisionDate"),this.collectionIds=this.getResponseProperty("CollectionIds"),this.creationDate=this.getResponseProperty("CreationDate"),this.deletedDate=this.getResponseProperty("DeletedDate"),this.archivedDate=this.getResponseProperty("ArchivedDate");let t=this.getResponseProperty("Login");t!=null&&(this.login=new Rt(t));let i=this.getResponseProperty("Card");i!=null&&(this.card=new Ut(i));let n=this.getResponseProperty("Identity");n!=null&&(this.identity=new Ct(n));let c=this.getResponseProperty("SecureNote");c!=null&&(this.secureNote=new Nt(c));let p=this.getResponseProperty("sshKey");p!=null&&(this.sshKey=new Mt(p));let f=this.getResponseProperty("Fields");f!=null&&(this.fields=f.map(M=>new Et(M)));let k=this.getResponseProperty("Attachments");k!=null&&(this.attachments=k.map(M=>new Lt(M)));let G=this.getResponseProperty("PasswordHistory");G!=null&&(this.passwordHistory=G.map(M=>new Ft(M))),this.reprompt=this.getResponseProperty("Reprompt")||D.None,this.key=this.getResponseProperty("Key")||null}};var _t=class extends d{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.name=this.getResponseProperty("Name"),this.revisionDate=this.getResponseProperty("RevisionDate")}};var zt=class extends d{constructor(t){super(t);this.folders=[];this.collections=[];this.ciphers=[];this.policies=[];this.sends=[];let i=this.getResponseProperty("Profile");i!=null&&(this.profile=new xt(i));let n=this.getResponseProperty("Folders");n!=null&&(this.folders=n.map(L=>new _t(L)));let c=this.getResponseProperty("Collections");c!=null&&(this.collections=c.map(L=>new qe(L)));let p=this.getResponseProperty("Ciphers");p!=null&&(this.ciphers=p.map(L=>new Vt(L)));let f=this.getResponseProperty("Domains");f!=null&&(this.domains=new bt(f));let k=this.getResponseProperty("Policies");k!=null&&(this.policies=k.map(L=>new dt(L)));let G=this.getResponseProperty("Sends");G!=null&&(this.sends=G.map(L=>new Kt(L)));let M=this.getResponseProperty("UserDecryption");M!=null&&typeof M=="object"&&(this.userDecryption=new ht(M))}};var Bt=class extends d{constructor(e){super(e),this.minComplexity=this.getResponseProperty("MinComplexity"),this.minLength=this.getResponseProperty("MinLength"),this.requireUpper=this.getResponseProperty("RequireUpper"),this.requireLower=this.getResponseProperty("RequireLower"),this.requireNumbers=this.getResponseProperty("RequireNumbers"),this.requireSpecial=this.getResponseProperty("RequireSpecial"),this.enforceOnLogin=this.getResponseProperty("EnforceOnLogin")}};var Ht=class extends d{constructor(e){super(e),this.keyConnectorUrl=this.getResponseProperty("KeyConnectorUrl")}};var Gt=class extends d{constructor(e){super(e),this.hasAdminApproval=this.getResponseProperty("HasAdminApproval"),this.hasLoginApprovingDevice=this.getResponseProperty("HasLoginApprovingDevice"),this.hasManageResetPasswordPermission=this.getResponseProperty("HasManageResetPasswordPermission"),this.isTdeOffboarding=this.getResponseProperty("IsTdeOffboarding"),e.EncryptedPrivateKey&&(this.encryptedPrivateKey=new o(this.getResponseProperty("EncryptedPrivateKey"))),e.EncryptedUserKey&&(this.encryptedUserKey=new o(this.getResponseProperty("EncryptedUserKey")))}};var $t=class extends d{constructor(e){super(e),this.hasMasterPassword=this.getResponseProperty("HasMasterPassword");let t=this.getResponseProperty("MasterPasswordUnlock");t!=null&&typeof t=="object"&&(this.masterPasswordUnlock=new He(t)),e.TrustedDeviceOption&&(this.trustedDeviceOption=new Gt(this.getResponseProperty("TrustedDeviceOption"))),e.KeyConnectorOption&&(this.keyConnectorOption=new Ht(this.getResponseProperty("KeyConnectorOption"))),e.WebAuthnPrfOption&&(this.webAuthnPrfOption=new Fe(this.getResponseProperty("WebAuthnPrfOption")))}};var Yt=class extends d{constructor(t){super(t);this.accountKeysResponseModel=null;let i=this.getResponseProperty("access_token");if(i==null||typeof i!="string")throw new Error("Identity response does not contain a valid access token");let n=this.getResponseProperty("token_type");if(n==null||typeof n!="string")throw new Error("Identity response does not contain a valid token type");this.accessToken=i,this.tokenType=n;let c=this.getResponseProperty("expires_in");c!=null&&typeof c=="number"&&(this.expiresIn=c);let p=this.getResponseProperty("refresh_token");p!=null&&typeof p=="string"&&(this.refreshToken=p),this.privateKey=this.getResponseProperty("PrivateKey"),this.getResponseProperty("AccountKeys")!=null&&(this.accountKeysResponseModel=new Ge(this.getResponseProperty("AccountKeys")));let f=this.getResponseProperty("Key");f&&(this.key=new o(f)),this.twoFactorToken=this.getResponseProperty("TwoFactorToken");let k=this.getResponseProperty("Kdf"),G=this.getResponseProperty("KdfIterations"),M=this.getResponseProperty("KdfMemory"),L=this.getResponseProperty("KdfParallelism");this.kdfConfig=k==0?new E(G):new N(G,M,L),this.forcePasswordReset=this.getResponseProperty("ForcePasswordReset"),this.apiUseKeyConnector=this.getResponseProperty("ApiUseKeyConnector"),this.masterPasswordPolicy=new Bt(this.getResponseProperty("MasterPasswordPolicy"));let Wt=this.getResponseProperty("UserDecryptionOptions");Wt!=null&&typeof Wt=="object"&&(this.userDecryptionOptions=new $t(Wt))}hasMasterKeyEncryptedUserKey(){return!!this.key}};var Jt=class extends d{constructor(e){super(e),this.kdf=this.getResponseProperty("Kdf"),this.kdfIterations=this.getResponseProperty("KdfIterations"),this.kdfMemory=this.getResponseProperty("KdfMemory"),this.kdfParallelism=this.getResponseProperty("KdfParallelism")}};0&&(module.exports={Cipher,CipherData,CipherWithIdExport,EncString,Folder,FolderData,FolderWithIdExport,IdentityTokenResponse,PreloginResponse,SymmetricCryptoKey,SyncResponse});
